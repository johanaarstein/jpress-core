"use strict";window.jscolor||(window.jscolor=function(){var c,d,f,g,h,a=Math.max,b=Math.round,j={register:function register(){j.attachDOMReadyEvent(j.init),j.attachEvent(document,"mousedown",j.onDocumentMouseDown),j.attachEvent(document,"touchstart",j.onDocumentTouchStart),j.attachEvent(window,"resize",j.onWindowResize)},init:function init(){j.jscolor.lookupClass&&j.jscolor.installByClassName(j.jscolor.lookupClass)},tryInstallOnElements:function tryInstallOnElements(b,c){for(var e=new RegExp("(^|\\s)("+c+")(\\s*(\\{[^}]*\\})|\\s|$)","i"),f=0;f<b.length;f+=1){var g;if((void 0===b[f].type||"color"!=b[f].type.toLowerCase()||!j.isColorAttrSupported)&&!b[f].jscolor&&b[f].className&&(g=b[f].className.match(e))){var h=b[f],i=null,k=j.getDataAttr(h,"jscolor");null===k?g[4]&&(i=g[4]):i=k;var a={};if(i)try{a=new Function("return ("+i+")")()}catch(a){j.warn("Error parsing jscolor options: "+a+":\n"+i)}h.jscolor=new j.jscolor(h,a)}}},isColorAttrSupported:(h=document.createElement("input"),h.setAttribute&&(h.setAttribute("type","color"),"color"==h.type.toLowerCase())),isCanvasSupported:function(){var a=document.createElement("canvas");return a.getContext&&a.getContext("2d")}(),fetchElement:function fetchElement(a){return"string"==typeof a?document.getElementById(a):a},isElementType:function isElementType(a,b){return a.nodeName.toLowerCase()===b.toLowerCase()},getDataAttr:function getDataAttr(a,b){var c=a.getAttribute("data-"+b);return null===c?null:c},attachEvent:function attachEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},detachEvent:function detachEvent(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},_attachedGroupEvents:{},attachGroupEvent:function attachGroupEvent(a,b,c,d){j._attachedGroupEvents.hasOwnProperty(a)||(j._attachedGroupEvents[a]=[]),j._attachedGroupEvents[a].push([b,c,d]),j.attachEvent(b,c,d)},detachGroupEvents:function detachGroupEvents(a){if(j._attachedGroupEvents.hasOwnProperty(a)){for(var b,c=0;c<j._attachedGroupEvents[a].length;c+=1)b=j._attachedGroupEvents[a][c],j.detachEvent(b[0],b[1],b[2]);delete j._attachedGroupEvents[a]}},attachDOMReadyEvent:function attachDOMReadyEvent(a){var b=!1,c=function(){b||(b=!0,a())};if("complete"===document.readyState)setTimeout(c,1);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),c())}),window.attachEvent("onload",c),document.documentElement.doScroll&&window==window.top)){var d=function(){if(document.body)try{document.documentElement.doScroll("left"),c()}catch(a){setTimeout(d,1)}};d()}},warn:function warn(a){window.console&&window.console.warn&&window.console.warn(a)},preventDefault:function preventDefault(a){a.preventDefault&&a.preventDefault(),a.returnValue=!1},captureTarget:function captureTarget(a){a.setCapture&&(j._capturedTarget=a,j._capturedTarget.setCapture())},releaseTarget:function releaseTarget(){j._capturedTarget&&(j._capturedTarget.releaseCapture(),j._capturedTarget=null)},fireEvent:function fireEvent(a,b){if(a)if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)}else if(document.createEventObject){var d=document.createEventObject();a.fireEvent("on"+b,d)}else a["on"+b]&&a["on"+b]()},classNameToList:function classNameToList(a){return a.replace(/^\s+|\s+$/g,"").split(/\s+/)},hasClass:function hasClass(a,b){return!!b&&-1!=(" "+a.className.replace(/\s+/g," ")+" ").indexOf(" "+b+" ")},setClass:function setClass(a,b){for(var c=j.classNameToList(b),d=0;d<c.length;d+=1)j.hasClass(a,c[d])||(a.className+=(a.className?" ":"")+c[d])},unsetClass:function unsetClass(a,b){for(var c,d=j.classNameToList(b),e=0;e<d.length;e+=1)c=new RegExp("^\\s*"+d[e]+"\\s*|\\s*"+d[e]+"\\s*$|\\s+"+d[e]+"(\\s+)","g"),a.className=a.className.replace(c,"$1")},getStyle:function getStyle(a){return window.getComputedStyle?window.getComputedStyle(a):a.currentStyle},setStyle:(d=document.createElement("div"),f=function(a){for(var b=0;b<a.length;b+=1)if(a[b]in d.style)return a[b]},g={borderRadius:f(["borderRadius","MozBorderRadius","webkitBorderRadius"]),boxShadow:f(["boxShadow","MozBoxShadow","webkitBoxShadow"])},function(a,c,d){switch(c.toLowerCase()){case"opacity":var e=b(100*parseFloat(d));a.style.opacity=d,a.style.filter="alpha(opacity="+e+")";break;default:a.style[g[c]]=d;}}),setBorderRadius:function setBorderRadius(a,b){j.setStyle(a,"borderRadius",b||"0")},setBoxShadow:function setBoxShadow(a,b){j.setStyle(a,"boxShadow",b||"none")},getElementPos:function getElementPos(a,b){var c=0,d=0,e=a.getBoundingClientRect();if(c=e.left,d=e.top,!b){var f=j.getViewPos();c+=f[0],d+=f[1]}return[c,d]},getElementSize:function getElementSize(a){return[a.offsetWidth,a.offsetHeight]},getAbsPointerPos:function getAbsPointerPos(a){a||(a=window.event);var b=0,c=0;return void 0!==a.changedTouches&&a.changedTouches.length?(b=a.changedTouches[0].clientX,c=a.changedTouches[0].clientY):"number"==typeof a.clientX&&(b=a.clientX,c=a.clientY),{x:b,y:c}},getRelPointerPos:function getRelPointerPos(a){a||(a=window.event);var b=(a.target||a.srcElement).getBoundingClientRect(),c=0,d=0;return void 0!==a.changedTouches&&a.changedTouches.length?(c=a.changedTouches[0].clientX,d=a.changedTouches[0].clientY):"number"==typeof a.clientX&&(c=a.clientX,d=a.clientY),{x:c-b.left,y:d-b.top}},getViewPos:function getViewPos(){var a=document.documentElement;return[(window.pageXOffset||a.scrollLeft)-(a.clientLeft||0),(window.pageYOffset||a.scrollTop)-(a.clientTop||0)]},getViewSize:function getViewSize(){var a=document.documentElement;return[window.innerWidth||a.clientWidth,window.innerHeight||a.clientHeight]},redrawPosition:function redrawPosition(){if(j.picker&&j.picker.owner){var b,f,g=j.picker.owner;g.fixed?(b=j.getElementPos(g.targetElement,!0),f=[0,0]):(b=j.getElementPos(g.targetElement),f=j.getViewPos());var i,k,n,q=j.getElementSize(g.targetElement),l=j.getViewSize(),a=j.getPickerOuterDims(g);switch(g.position.toLowerCase()){case"left":i=1,k=0,n=-1;break;case"right":i=1,k=0,n=1;break;case"top":i=0,k=1,n=-1;break;default:i=0,k=1,n=1;}var d=(q[k]+a[k])/2;if(g.smartPosition)c=[-f[i]+b[i]+a[i]>l[i]&&-f[i]+b[i]+q[i]/2>l[i]/2&&0<=b[i]+q[i]-a[i]?b[i]+q[i]-a[i]:b[i],-f[k]+b[k]+q[k]+a[k]-d+d*n>l[k]?-f[k]+b[k]+q[k]/2>l[k]/2&&0<=b[k]+q[k]-d-d*n?b[k]+q[k]-d-d*n:b[k]+q[k]-d+d*n:0<=b[k]+q[k]-d+d*n?b[k]+q[k]-d+d*n:b[k]+q[k]-d-d*n];else var c=[b[i],b[k]+q[k]-d+d*n];var w=c[i],p=c[k],u=g.fixed?"fixed":"absolute",m=(c[0]+a[0]>b[0]||c[0]<b[0]+q[0])&&c[1]+a[1]<b[1]+q[1];j._drawPosition(g,w,p,u,m)}},_drawPosition:function _drawPosition(a,b,c,d,e){var f=e?0:a.shadowBlur;j.picker.wrap.style.position=d,j.picker.wrap.style.left=b+"px",j.picker.wrap.style.top=c+"px",j.setBoxShadow(j.picker.boxS,a.shadow?new j.BoxShadow(0,f,a.shadowBlur,0,a.shadowColor):null)},getPickerDims:function getPickerDims(a){var b=!!j.getSliderComponent(a);return[2*a.insetWidth+2*a.padding+a.width+(b?2*a.insetWidth+j.getPadToSliderPadding(a)+a.sliderSize:0),2*a.insetWidth+2*a.padding+a.height+(a.closable?2*a.insetWidth+a.padding+a.buttonHeight:0)]},getPickerOuterDims:function getPickerOuterDims(a){var b=j.getPickerDims(a);return[b[0]+2*a.borderWidth,b[1]+2*a.borderWidth]},getPadToSliderPadding:function getPadToSliderPadding(b){return a(b.padding,1.5*(2*b.pointerBorderWidth+b.pointerThickness))},getPadYComponent:function getPadYComponent(a){switch(a.mode.charAt(1).toLowerCase()){case"v":return"v";}return"s"},getSliderComponent:function getSliderComponent(a){if(2<a.mode.length)switch(a.mode.charAt(2).toLowerCase()){case"s":return"s";case"v":return"v";}return null},onDocumentMouseDown:function onDocumentMouseDown(a){a||(a=window.event);var b=a.target||a.srcElement;b._jscLinkedInstance?b._jscLinkedInstance.showOnClick&&b._jscLinkedInstance.show():b._jscControlName?j.onControlPointerStart(a,b,b._jscControlName,"mouse"):j.picker&&j.picker.owner&&j.picker.owner.hide()},onDocumentTouchStart:function onDocumentTouchStart(a){a||(a=window.event);var b=a.target||a.srcElement;b._jscLinkedInstance?b._jscLinkedInstance.showOnClick&&b._jscLinkedInstance.show():b._jscControlName?j.onControlPointerStart(a,b,b._jscControlName,"touch"):j.picker&&j.picker.owner&&j.picker.owner.hide()},onWindowResize:function onWindowResize(){j.redrawPosition()},onParentScroll:function onParentScroll(){j.picker&&j.picker.owner&&j.picker.owner.hide()},_pointerMoveEvent:{mouse:"mousemove",touch:"touchmove"},_pointerEndEvent:{mouse:"mouseup",touch:"touchend"},_pointerOrigin:null,_capturedTarget:null,onControlPointerStart:function onControlPointerStart(b,e,f,g){var h=e._jscInstance;j.preventDefault(b),j.captureTarget(e);var i=function(a,c){j.attachGroupEvent("drag",a,j._pointerMoveEvent[g],j.onDocumentPointerMove(b,e,f,g,c)),j.attachGroupEvent("drag",a,j._pointerEndEvent[g],j.onDocumentPointerEnd(b,e,f,g))};if(i(document,[0,0]),window.parent&&window.frameElement){var k=window.frameElement.getBoundingClientRect(),l=[-k.left,-k.top];i(window.parent.window.document,l)}var a=j.getAbsPointerPos(b),d=j.getRelPointerPos(b);switch(j._pointerOrigin={x:a.x-d.x,y:a.y-d.y},f){case"pad":switch(j.getSliderComponent(h)){case"s":0===h.hsv[1]&&h.fromHSV(null,100,null);break;case"v":0===h.hsv[2]&&h.fromHSV(null,null,100);}j.setPad(h,b,0,0);break;case"sld":j.setSld(h,b,0);}j.dispatchFineChange(h)},onDocumentPointerMove:function onDocumentPointerMove(a,b,c,d,f){return function(a){var d=b._jscInstance;"pad"===c?(a||(a=window.event),j.setPad(d,a,f[0],f[1]),j.dispatchFineChange(d)):"sld"===c?(a||(a=window.event),j.setSld(d,a,f[1]),j.dispatchFineChange(d)):void 0}},onDocumentPointerEnd:function onDocumentPointerEnd(a,b){return function(){var a=b._jscInstance;j.detachGroupEvents("drag"),j.releaseTarget(),j.dispatchChange(a)}},dispatchChange:function dispatchChange(a){a.valueElement&&j.isElementType(a.valueElement,"input")&&j.fireEvent(a.valueElement,"change")},dispatchFineChange:function dispatchFineChange(a){a.onFineChange&&("string"==typeof a.onFineChange?new Function(a.onFineChange):a.onFineChange).call(a)},setPad:function setPad(b,c,e,f){var g=j.getAbsPointerPos(c),h=e+g.x-j._pointerOrigin.x-b.padding-b.insetWidth,i=f+g.y-j._pointerOrigin.y-b.padding-b.insetWidth,k=h*(360/(b.width-1)),a=100-i*(100/(b.height-1));switch(j.getPadYComponent(b)){case"s":b.fromHSV(k,a,null,j.leaveSld);break;case"v":b.fromHSV(k,null,a,j.leaveSld);}},setSld:function setSld(a,b,c){var d=100-(c+j.getAbsPointerPos(b).y-j._pointerOrigin.y-a.padding-a.insetWidth)*(100/(a.height-1));switch(j.getSliderComponent(a)){case"s":a.fromHSV(null,d,null,j.leavePad);break;case"v":a.fromHSV(null,null,d,j.leavePad);}},_vmlNS:"jsc_vml_",_vmlCSS:"jsc_vml_css_",_vmlReady:!1,initVML:function initVML(){if(!j._vmlReady){var a=document;if(a.namespaces[j._vmlNS]||a.namespaces.add(j._vmlNS,"urn:schemas-microsoft-com:vml"),!a.styleSheets[j._vmlCSS]){var b=["shape","shapetype","group","background","path","formulas","handles","fill","stroke","shadow","textbox","textpath","imagedata","line","polyline","curve","rect","roundrect","oval","arc","image"],c=a.createStyleSheet();c.owningElement.id=j._vmlCSS;for(var d=0;d<b.length;d+=1)c.addRule(j._vmlNS+"\\:"+b[d],"behavior:url(#default#VML);")}j._vmlReady=!0}},createPalette:function createPalette(){var b={elm:null,draw:null};if(j.isCanvasSupported){var c=document.createElement("canvas"),d=c.getContext("2d"),e=function(a,b,e){c.width=a,c.height=b,d.clearRect(0,0,c.width,c.height);var f=d.createLinearGradient(0,0,c.width,0);f.addColorStop(0,"#F00"),f.addColorStop(1/6,"#FF0"),f.addColorStop(2/6,"#0F0"),f.addColorStop(.5,"#0FF"),f.addColorStop(4/6,"#00F"),f.addColorStop(5/6,"#F0F"),f.addColorStop(1,"#F00"),d.fillStyle=f,d.fillRect(0,0,c.width,c.height);var g=d.createLinearGradient(0,0,0,c.height);switch(e.toLowerCase()){case"s":g.addColorStop(0,"rgba(255,255,255,0)"),g.addColorStop(1,"rgba(255,255,255,1)");break;case"v":g.addColorStop(0,"rgba(0,0,0,0)"),g.addColorStop(1,"rgba(0,0,0,1)");}d.fillStyle=g,d.fillRect(0,0,c.width,c.height)};b.elm=c,b.draw=e}else{j.initVML();var f=document.createElement("div");f.style.position="relative",f.style.overflow="hidden";var g=document.createElement(j._vmlNS+":fill");g.type="gradient",g.method="linear",g.angle="90",g.colors="16.67% #F0F, 33.33% #00F, 50% #0FF, 66.67% #0F0, 83.33% #FF0";var h=document.createElement(j._vmlNS+":rect");h.style.position="absolute",h.style.left="-1px",h.style.top="-1px",h.stroked=!1,h.appendChild(g),f.appendChild(h);var i=document.createElement(j._vmlNS+":fill");i.type="gradient",i.method="linear",i.angle="180",i.opacity="0";var k=document.createElement(j._vmlNS+":rect");k.style.position="absolute",k.style.left="-1px",k.style.top="-1px",k.stroked=!1,k.appendChild(i),f.appendChild(k),b.elm=f,b.draw=function _t(a,b,c){switch(f.style.width=a+"px",f.style.height=b+"px",h.style.width=k.style.width=a+1+"px",h.style.height=k.style.height=b+1+"px",g.color="#F00",g.color2="#F00",c.toLowerCase()){case"s":i.color=i.color2="#FFF";break;case"v":i.color=i.color2="#000";}}}return b},createSliderGradient:function createSliderGradient(){var a={elm:null,draw:null};if(j.isCanvasSupported){var b=document.createElement("canvas"),c=b.getContext("2d"),d=function(a,d,e,f){b.width=a,b.height=d,c.clearRect(0,0,b.width,b.height);var g=c.createLinearGradient(0,0,0,b.height);g.addColorStop(0,e),g.addColorStop(1,f),c.fillStyle=g,c.fillRect(0,0,b.width,b.height)};a.elm=b,a.draw=d}else{j.initVML();var f=document.createElement("div");f.style.position="relative",f.style.overflow="hidden";var g=document.createElement(j._vmlNS+":fill");g.type="gradient",g.method="linear",g.angle="180";var h=document.createElement(j._vmlNS+":rect");h.style.position="absolute",h.style.left="-1px",h.style.top="-1px",h.stroked=!1,h.appendChild(g),f.appendChild(h),a.elm=f,a.draw=function _t2(a,b,c,d){f.style.width=a+"px",f.style.height=b+"px",h.style.width=a+1+"px",h.style.height=b+1+"px",g.color=c,g.color2=d}}return a},leaveValue:1,leaveStyle:2,leavePad:4,leaveSld:8,BoxShadow:(c=function e(a,b,c,d,e,f){this.hShadow=a,this.vShadow=b,this.blur=c,this.spread=d,this.color=e,this.inset=!!f},c.prototype.toString=function(){var a=[b(this.hShadow)+"px",b(this.vShadow)+"px",b(this.blur)+"px",b(this.spread)+"px",this.color];return this.inset&&a.push("inset"),a.join(" ")},c),jscolor:function jscolor(f,e){function q(a,b,c){var d=255*(c/100);if(null===a)return[d,d,d];a/=60,b/=100;var f=k(a),g=d*(1-b),h=d*(1-b*(f%2?a-f:1-(a-f)));return 6===f||0===f?[d,h,g]:1===f?[h,d,g]:2===f?[g,d,h]:3===f?[g,h,d]:4===f?[h,g,d]:5===f?[d,g,h]:void 0}function i(){x._processParentElementsInDOM(),j.picker||(j.picker={owner:null,wrap:document.createElement("div"),box:document.createElement("div"),boxS:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),padPal:j.createPalette(),cross:document.createElement("div"),crossBY:document.createElement("div"),crossBX:document.createElement("div"),crossLY:document.createElement("div"),crossLX:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),sldGrad:j.createSliderGradient(),sldPtrS:document.createElement("div"),sldPtrIB:document.createElement("div"),sldPtrMB:document.createElement("div"),sldPtrOB:document.createElement("div"),btn:document.createElement("div"),btnT:document.createElement("span")},j.picker.pad.appendChild(j.picker.padPal.elm),j.picker.padB.appendChild(j.picker.pad),j.picker.cross.appendChild(j.picker.crossBY),j.picker.cross.appendChild(j.picker.crossBX),j.picker.cross.appendChild(j.picker.crossLY),j.picker.cross.appendChild(j.picker.crossLX),j.picker.padB.appendChild(j.picker.cross),j.picker.box.appendChild(j.picker.padB),j.picker.box.appendChild(j.picker.padM),j.picker.sld.appendChild(j.picker.sldGrad.elm),j.picker.sldB.appendChild(j.picker.sld),j.picker.sldB.appendChild(j.picker.sldPtrOB),j.picker.sldPtrOB.appendChild(j.picker.sldPtrMB),j.picker.sldPtrMB.appendChild(j.picker.sldPtrIB),j.picker.sldPtrIB.appendChild(j.picker.sldPtrS),j.picker.box.appendChild(j.picker.sldB),j.picker.box.appendChild(j.picker.sldM),j.picker.btn.appendChild(j.picker.btnT),j.picker.box.appendChild(j.picker.btn),j.picker.boxB.appendChild(j.picker.box),j.picker.wrap.appendChild(j.picker.boxS),j.picker.wrap.appendChild(j.picker.boxB));var f,i,l=j.picker,m=!!j.getSliderComponent(x),n=j.getPickerDims(x),o=2*x.pointerBorderWidth+x.pointerThickness+2*x.crossSize,a=j.getPadToSliderPadding(x),d=g(x.borderRadius,b(x.padding*Math.PI));l.wrap.style.clear="both",l.wrap.style.width=n[0]+2*x.borderWidth+"px",l.wrap.style.height=n[1]+2*x.borderWidth+"px",l.wrap.style.zIndex=x.zIndex,l.box.style.width=n[0]+"px",l.box.style.height=n[1]+"px",l.boxS.style.position="absolute",l.boxS.style.left="0",l.boxS.style.top="0",l.boxS.style.width="100%",l.boxS.style.height="100%",j.setBorderRadius(l.boxS,d+"px"),l.boxB.style.position="relative",l.boxB.style.border=x.borderWidth+"px solid",l.boxB.style.borderColor=x.borderColor,l.boxB.style.background=x.backgroundColor,j.setBorderRadius(l.boxB,d+"px"),l.padM.style.background=l.sldM.style.background="#FFF",j.setStyle(l.padM,"opacity","0"),j.setStyle(l.sldM,"opacity","0"),l.pad.style.position="relative",l.pad.style.width=x.width+"px",l.pad.style.height=x.height+"px",l.padPal.draw(x.width,x.height,j.getPadYComponent(x)),l.padB.style.position="absolute",l.padB.style.left=x.padding+"px",l.padB.style.top=x.padding+"px",l.padB.style.border=x.insetWidth+"px solid",l.padB.style.borderColor=x.insetColor,l.padM._jscInstance=x,l.padM._jscControlName="pad",l.padM.style.position="absolute",l.padM.style.left="0",l.padM.style.top="0",l.padM.style.width=x.padding+2*x.insetWidth+x.width+a/2+"px",l.padM.style.height=n[1]+"px",l.padM.style.cursor="crosshair",l.cross.style.position="absolute",l.cross.style.left=l.cross.style.top="0",l.cross.style.width=l.cross.style.height=o+"px",l.crossBY.style.position=l.crossBX.style.position="absolute",l.crossBY.style.background=l.crossBX.style.background=x.pointerBorderColor,l.crossBY.style.width=l.crossBX.style.height=2*x.pointerBorderWidth+x.pointerThickness+"px",l.crossBY.style.height=l.crossBX.style.width=o+"px",l.crossBY.style.left=l.crossBX.style.top=k(o/2)-k(x.pointerThickness/2)-x.pointerBorderWidth+"px",l.crossBY.style.top=l.crossBX.style.left="0",l.crossLY.style.position=l.crossLX.style.position="absolute",l.crossLY.style.background=l.crossLX.style.background=x.pointerColor,l.crossLY.style.height=l.crossLX.style.width=o-2*x.pointerBorderWidth+"px",l.crossLY.style.width=l.crossLX.style.height=x.pointerThickness+"px",l.crossLY.style.left=l.crossLX.style.top=k(o/2)-k(x.pointerThickness/2)+"px",l.crossLY.style.top=l.crossLX.style.left=x.pointerBorderWidth+"px",l.sld.style.overflow="hidden",l.sld.style.width=x.sliderSize+"px",l.sld.style.height=x.height+"px",l.sldGrad.draw(x.sliderSize,x.height,"#000","#000"),l.sldB.style.display=m?"block":"none",l.sldB.style.position="absolute",l.sldB.style.right=x.padding+"px",l.sldB.style.top=x.padding+"px",l.sldB.style.border=x.insetWidth+"px solid",l.sldB.style.borderColor=x.insetColor,l.sldM._jscInstance=x,l.sldM._jscControlName="sld",l.sldM.style.display=m?"block":"none",l.sldM.style.position="absolute",l.sldM.style.right="0",l.sldM.style.top="0",l.sldM.style.width=x.sliderSize+a/2+x.padding+2*x.insetWidth+"px",l.sldM.style.height=n[1]+"px",l.sldM.style.cursor="default",l.sldPtrIB.style.border=l.sldPtrOB.style.border=x.pointerBorderWidth+"px solid "+x.pointerBorderColor,l.sldPtrOB.style.position="absolute",l.sldPtrOB.style.left=-(2*x.pointerBorderWidth+x.pointerThickness)+"px",l.sldPtrOB.style.top="0",l.sldPtrMB.style.border=x.pointerThickness+"px solid "+x.pointerColor,l.sldPtrS.style.width=x.sliderSize+"px",l.sldPtrS.style.height=p+"px",l.btn.style.display=x.closable?"block":"none",l.btn.style.position="absolute",l.btn.style.left=x.padding+"px",l.btn.style.bottom=x.padding+"px",l.btn.style.padding="0 15px",l.btn.style.height=x.buttonHeight+"px",l.btn.style.border=x.insetWidth+"px solid",f=x.insetColor.split(/\s+/),i=2>f.length?f[0]:f[1]+" "+f[0]+" "+f[0]+" "+f[1],l.btn.style.borderColor=i,l.btn.style.color=x.buttonColor,l.btn.style.font="12px sans-serif",l.btn.style.textAlign="center";try{l.btn.style.cursor="pointer"}catch(a){l.btn.style.cursor="hand"}l.btn.onmousedown=function(){x.hide()},l.btnT.style.lineHeight=x.buttonHeight+"px",l.btnT.innerHTML="",l.btnT.appendChild(document.createTextNode(x.closeText)),w(),s(),j.picker.owner&&j.picker.owner!==x&&j.unsetClass(j.picker.owner.targetElement,x.activeClass),j.picker.owner=x,j.isElementType(h,"body")?j.redrawPosition():j._drawPosition(x,0,0,"relative",!1),l.wrap.parentNode!=h&&h.appendChild(l.wrap),j.setClass(x.targetElement,x.activeClass)}function w(){switch(j.getPadYComponent(x)){case"s":var f=1;break;case"v":f=2;}var g=b(x.hsv[0]/360*(x.width-1)),h=b((1-x.hsv[f]/100)*(x.height-1)),i=2*x.pointerBorderWidth+x.pointerThickness+2*x.crossSize,m=-k(i/2);switch(j.picker.cross.style.left=g+m+"px",j.picker.cross.style.top=h+m+"px",j.getSliderComponent(x)){case"s":var n=q(x.hsv[0],100,x.hsv[2]),l=q(x.hsv[0],0,x.hsv[2]),a="rgb("+b(n[0])+","+b(n[1])+","+b(n[2])+")",o="rgb("+b(l[0])+","+b(l[1])+","+b(l[2])+")";j.picker.sldGrad.draw(x.sliderSize,x.height,a,o);break;case"v":var r=q(x.hsv[0],x.hsv[1],100);a="rgb("+b(r[0])+","+b(r[1])+","+b(r[2])+")",o="#000",j.picker.sldGrad.draw(x.sliderSize,x.height,a,o);}}function s(){var a=j.getSliderComponent(x);if(a){switch(a){case"s":var c=1;break;case"v":c=2;}var d=b((1-x.hsv[c]/100)*(x.height-1));j.picker.sldPtrOB.style.top=d-(2*x.pointerBorderWidth+x.pointerThickness)-k(p/2)+"px"}}function l(){return j.picker&&j.picker.owner===x}var g=Math.min,k=Math.floor;for(var o in this.value=null,this.valueElement=f,this.styleElement=f,this.required=!0,this.refine=!0,this.hash=!1,this.uppercase=!0,this.onFineChange=null,this.activeClass="jscolor-active",this.overwriteImportant=!1,this.minS=0,this.maxS=100,this.minV=0,this.maxV=100,this.hsv=[0,0,100],this.rgb=[255,255,255],this.width=181,this.height=101,this.showOnClick=!0,this.mode="HSV",this.position="bottom",this.smartPosition=!0,this.sliderSize=16,this.crossSize=8,this.closable=!1,this.closeText="Close",this.buttonColor="#000000",this.buttonHeight=18,this.padding=12,this.backgroundColor="#FFFFFF",this.borderWidth=1,this.borderColor="#BBBBBB",this.borderRadius=8,this.insetWidth=1,this.insetColor="#BBBBBB",this.shadow=!0,this.shadowBlur=15,this.shadowColor="rgba(0,0,0,0.2)",this.pointerColor="#4C4C4C",this.pointerBorderColor="#FFFFFF",this.pointerBorderWidth=1,this.pointerThickness=2,this.zIndex=1e3,this.container=null,e)e.hasOwnProperty(o)&&(this[o]=e[o]);if(this.hide=function(){l()&&(j.unsetClass(x.targetElement,x.activeClass),j.picker.wrap.parentNode.removeChild(j.picker.wrap),delete j.picker.owner)},this.show=function(){i()},this.redraw=function(){l()&&i()},this.importColor=function(){this.valueElement&&j.isElementType(this.valueElement,"input")?this.refine?!this.required&&/^\s*$/.test(this.valueElement.value)?(this.valueElement.value="",this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(j.leaveValue|j.leaveStyle)):this.fromString(this.valueElement.value)||this.exportColor():this.fromString(this.valueElement.value,j.leaveValue)||(this.styleElement&&(this.styleElement.style.backgroundImage=this.styleElement._jscOrigStyle.backgroundImage,this.styleElement.style.backgroundColor=this.styleElement._jscOrigStyle.backgroundColor,this.styleElement.style.color=this.styleElement._jscOrigStyle.color),this.exportColor(j.leaveValue|j.leaveStyle)):this.exportColor()},this.exportColor=function(a){if(!(a&j.leaveValue)&&this.valueElement){var b=this.toString();this.uppercase&&(b=b.toUpperCase()),this.hash&&(b="#"+b),j.isElementType(this.valueElement,"input")?this.valueElement.value=b:this.valueElement.innerHTML=b}if(!(a&j.leaveStyle)&&this.styleElement){var c="#"+this.toString();q=this.isLight()?"#000":"#FFF",this.styleElement.style.backgroundImage="none",this.styleElement.style.backgroundColor=c,this.styleElement.style.color=q,this.overwriteImportant&&this.styleElement.setAttribute("style","background: "+c+" !important; color: "+q+" !important;")}a&j.leavePad||!l()||w(),a&j.leaveSld||!l()||s()},this.fromHSV=function(b,c,d,f){if(null!==b){if(isNaN(b))return!1;b=a(0,g(360,b))}if(null!==c){if(isNaN(c))return!1;c=a(0,g(100,this.maxS,c),this.minS)}if(null!==d){if(isNaN(d))return!1;d=a(0,g(100,this.maxV,d),this.minV)}this.rgb=q(null===b?this.hsv[0]:this.hsv[0]=b,null===c?this.hsv[1]:this.hsv[1]=c,null===d?this.hsv[2]:this.hsv[2]=d),this.exportColor(f)},this.fromRGB=function(b,c,d,f){if(null!==b){if(isNaN(b))return!1;b=a(0,g(255,b))}if(null!==c){if(isNaN(c))return!1;c=a(0,g(255,c))}if(null!==d){if(isNaN(d))return!1;d=a(0,g(255,d))}var h=function(b,c,d){b/=255,c/=255,d/=255;var f=g(g(b,c),d),h=a(a(b,c),d),j=h-f;if(0==j)return[null,0,100*h];var i=b===f?3+(d-c)/j:c===f?5+(b-d)/j:1+(c-b)/j;return[60*(6==i?0:i),100*(j/h),100*h]}(null===b?this.rgb[0]:b,null===c?this.rgb[1]:c,null===d?this.rgb[2]:d);null!==h[0]&&(this.hsv[0]=a(0,g(360,h[0]))),0!==h[2]&&(this.hsv[1]=null===h[1]?null:a(0,this.minS,g(100,this.maxS,h[1]))),this.hsv[2]=null===h[2]?null:a(0,this.minV,g(100,this.maxV,h[2]));var i=q(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=i[0],this.rgb[1]=i[1],this.rgb[2]=i[2],this.exportColor(f)},this.fromString=function(b,e){var f;if(f=b.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))return 6===f[1].length?this.fromRGB(parseInt(f[1].substr(0,2),16),parseInt(f[1].substr(2,2),16),parseInt(f[1].substr(4,2),16),e):this.fromRGB(parseInt(f[1].charAt(0)+f[1].charAt(0),16),parseInt(f[1].charAt(1)+f[1].charAt(1),16),parseInt(f[1].charAt(2)+f[1].charAt(2),16),e),!0;if(f=b.match(/^\W*rgba?\(([^)]*)\)\W*$/i)){var g,h,j,k=f[1].split(","),m=/^\s*(\d*)(\.\d+)?\s*$/;if(3<=k.length&&(g=k[0].match(m))&&(h=k[1].match(m))&&(j=k[2].match(m))){var l=parseFloat((g[1]||"0")+(g[2]||"")),a=parseFloat((h[1]||"0")+(h[2]||"")),d=parseFloat((j[1]||"0")+(j[2]||""));return this.fromRGB(l,a,d,e),!0}}return!1},this.toString=function(){return(256|b(this.rgb[0])).toString(16).substr(1)+(256|b(this.rgb[1])).toString(16).substr(1)+(256|b(this.rgb[2])).toString(16).substr(1)},this.toHEXString=function(){return"#"+this.toString().toUpperCase()},this.toRGBString=function(){return"rgb("+b(this.rgb[0])+","+b(this.rgb[1])+","+b(this.rgb[2])+")"},this.isLight=function(){return 127.5<.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]},this._processParentElementsInDOM=function(){if(!this._linkedElementsProcessed){this._linkedElementsProcessed=!0;var a=this.targetElement;do{var b=j.getStyle(a);b&&"fixed"===b.position.toLowerCase()&&(this.fixed=!0),a!==this.targetElement&&(a._jscEventsAttached||(j.attachEvent(a,"scroll",j.onParentScroll),a._jscEventsAttached=!0))}while((a=a.parentNode)&&!j.isElementType(a,"body"))}},"string"==typeof f){var n=f,d=document.getElementById(n);d?this.targetElement=d:j.warn("Could not find target element with ID '"+n+"'")}else f?this.targetElement=f:j.warn("Invalid target element: '"+f+"'");if(this.targetElement._jscLinkedInstance)j.warn("Cannot link jscolor twice to the same element. Skipping.");else{this.targetElement._jscLinkedInstance=this,this.valueElement=j.fetchElement(this.valueElement),this.styleElement=j.fetchElement(this.styleElement);var x=this,h=this.container?j.fetchElement(this.container):document.getElementsByTagName("body")[0],p=3;if(j.isElementType(this.targetElement,"button"))if(this.targetElement.onclick){var c=this.targetElement.onclick;this.targetElement.onclick=function(a){return c.call(this,a),!1}}else this.targetElement.onclick=function(){return!1};if(this.valueElement&&j.isElementType(this.valueElement,"input")){var m=function(){x.fromString(x.valueElement.value,j.leaveValue),j.dispatchFineChange(x)};j.attachEvent(this.valueElement,"keyup",m),j.attachEvent(this.valueElement,"input",m),j.attachEvent(this.valueElement,"blur",function(){x.importColor()}),this.valueElement.setAttribute("autocomplete","off")}this.styleElement&&(this.styleElement._jscOrigStyle={backgroundImage:this.styleElement.style.backgroundImage,backgroundColor:this.styleElement.style.backgroundColor,color:this.styleElement.style.color}),this.value?this.fromString(this.value)||this.exportColor():this.importColor()}}};return j.jscolor.lookupClass="jscolor",j.jscolor.installByClassName=function(a){var b=document.getElementsByTagName("input"),c=document.getElementsByTagName("button");j.tryInstallOnElements(b,a),j.tryInstallOnElements(c,a)},j.register(),j.jscolor}());
