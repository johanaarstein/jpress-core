"use strict";function _createForOfIteratorHelper(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var l=0,n=function(){};return{s:n,n:function n(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function e(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,d=!1;return{s:function s(){a=e[Symbol.iterator]()},n:function n(){var e=a.next();return r=e.done,e},e:function e(e){d=!0,s=e},f:function f(){try{r||null==a.return||a.return()}finally{if(d)throw s}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var request=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var moduleLink,deleteInput,moduleLinksArray,selectedMediaThumb,featuredImageContainer,featuredImageMenu,imageSaveContainer,imageInstructions,initialImagePosition,_index,nextItem,previousItem,newAlt,newCredit,newCaption,public_str,unpublish_str,draft_str,publish_str,displayInMenu_str,hideFromMenu_str,thereWasAnError,theUploadSucceeded,thisFileTypeIsNotAllowed,yourAboutToDeleteThisFilePermanently,yourAboutToDeleteThisUserPermanently,yourAboutToDeleteThisArticlePermanently,yourAboutToDeleteThisSectionPermanently,saved_str,dragToMove,uploadImage_str,copied_str,copyLink_str,fileTooBig,deleted_str,mapMessageText,added_str,headline_str,youHaveChangedUrl,pwdNoMatch_str,newUser_str,noFormsSelected_str,updated_str,alreadyUpdated_str,formData=new FormData,moduleMessage=document.getElementById("module-message"),message=document.getElementById("message"),messageSuccess=document.getElementById("success"),messageFailure=document.getElementById("failure"),messageDeleted=document.getElementById("deleted"),chooseImage=document.getElementById("choose-image"),published=document.getElementById("published"),pageLabel=document.getElementById("article-label"),displayInMenu=document.getElementById("display-in-menu"),mediaLibrary=document.getElementById("media-library-view"),imageDetails=document.getElementById("image-details"),imageDetailsForm=document.getElementById("image-details-form"),fileNameText=document.getElementById("filename"),fileNameInput=document.getElementById("filename-input"),fileSizeText=document.getElementById("filesize"),copyUrl=document.getElementById("copyurl"),imageAlt=document.getElementById("module-image-alt"),photoCredit=document.getElementById("module-photo-credit"),copyTooltip=document.getElementById("copy-tooltip"),selectedMedia=document.getElementById("selected-media"),captionSwitch=document.getElementById("caption-switch"),captionInput=document.getElementById("caption-input"),moduleLinks=document.getElementsByClassName("module-link"),_module=document.getElementsByClassName("module")[1],ytModule=document.getElementById("embed-youtube"),moduleClose=document.getElementById("close-module"),imgSaveBtn=document.getElementById("save-image-details"),adminPanelButton=document.getElementById("adminpanelbutton"),adminPanel=document.getElementById("admin-menu-wrapper"),loginModule=document.getElementById("module-login"),featuredImageInput=document.getElementById("featured-image-input"),featuredImageElement=document.getElementById("featured-image-element"),featuredImageId=document.getElementById("featured-image-id"),spinnerImage=document.getElementById("spinner-image");"no"===siteLang?(alreadyUpdated_str="Du har den nyeste versjonen",thereWasAnError="Det skjedde en feil",theUploadSucceeded="Opplastingen var vellykket!",thisFileTypeIsNotAllowed="Denne filtypen er ikke tillatt, eller filen er skadet",yourAboutToDeleteThisFilePermanently="Du er i ferd med \xE5 slette denne fila permanent. Er du sikker?",yourAboutToDeleteThisUserPermanently="Du er i ferd med \xE5 slette denne brukeren permanent. Er du sikker?",yourAboutToDeleteThisArticlePermanently="Du er i ferd med \xE5 slette denne artikkelen permanent. Er du sikker?",yourAboutToDeleteThisSectionPermanently="Du er i ferd med \xE5 slette denne seksjonen permanent. Er du sikker?",dragToMove="Dra for \xE5 flytte bildet",saved_str="Lagret",uploadImage_str="Last opp bilde",copied_str="Kopiert",copyLink_str="Kopier lenke",fileTooBig="Fila var for stor",deleted_str="Slettet",mapMessageText="Kartet kunne ikke lastes.",added_str="Lagt til",headline_str="Overskrift",youHaveChangedUrl="Du er i ferd med \xE5 endre URL'en. Husk \xE5 lage redirects dersom du vil beholde trafikken til den opprinnelige adressen",pwdNoMatch_str="Passordene du skrev inn stemte ikke overens.",newUser_str="Ny bruker lagt til",public_str="Offentlig",unpublish_str="Avpubliser",draft_str="Utkast",publish_str="Publiser",displayInMenu_str="Vis i meny",hideFromMenu_str="Gjem fra meny",noFormsSelected_str="Ingen tekstfelt valgt for lagring",updated_str="Great success! JPress er oppdatert."):"en"===siteLang&&(alreadyUpdated_str="You have the newest version",thereWasAnError="There was an error",theUploadSucceeded="The upload succeeded!",thisFileTypeIsNotAllowed="This file type is not allowed, or your file is damaged",yourAboutToDeleteThisFilePermanently="You're about to delete this file permanently. Are you sure?",yourAboutToDeleteThisUserPermanently="You're about to delete this user permanently. Are you sure?",yourAboutToDeleteThisArticlePermanently="You're about to delete this article permanently. Are you sure?",yourAboutToDeleteThisSectionPermanently="You're about to delete this section permanently. Are you sure?",dragToMove="Drag to move image",saved_str="Saved",uploadImage_str="Upload Image",copied_str="Copied",copyLink_str="Copy link",fileTooBig="The file was too big",deleted_str="Deleted",mapMessageText="The map could not be loaded.",added_str="Added",headline_str="Headline",youHaveChangedUrl="You're about to change the URL. Remember to set up redirects if you want to keep the traffic from the old address.",pwdNoMatch_str="The passwords did not match.",newUser_str="New user added",public_str="Pulic",unpublish_str="Unpublish",draft_str="Draft",publish_str="Publish",displayInMenu_str="Show in menu",hideFromMenu_str="Hide from menu",noFormsSelected_str="No textfield chosen for save",updated_str="Great success! JPress is updated."),document.getElementById("get-updates")&&document.getElementById("get-updates").addEventListener("click",function(t){t.preventDefault();dbQuery("update-core","/jp-includes/update/update-core.php","application/x-www-form-urlencoded",messageSuccess,updated_str)});function isHome(){var e=!1;return 0<document.getElementsByClassName("home").length&&(e=!0),e}function isArticle(){var e=!1;return 0<document.getElementsByClassName("article").length&&(e=!0),e}function isSettings(){var e=!1;return 0<document.getElementsByClassName("seo-panel").length&&(e=!0),e}function queryStringToJSON(e){e=e||location.search.slice(1);var t=e.split("&"),a={};return t.forEach(function(e){var t=e.split("="),l=t[0],n=decodeURIComponent(t[1]||"");a[l]?"[object Array]"===Object.prototype.toString.call(a[l])?a[l].push(n):a[l]=[a[l],n]:a[l]=n}),JSON.parse(JSON.stringify(a))}function dbQuery(e,t,a,l,n,s,i){return new Promise(function(r){spinnerGlobal.style.display="block",spinnerGlobal.style.opacity="1",request.open("POST",t,!0),request.setRequestHeader("Content-Type",a+"; charset=UTF-8"),request.onreadystatechange=function(){if(spinnerGlobal.style.display="none",spinnerGlobal.style.opacity="0",message.innerText="",l.style.display=messageFailure.style.display="none",fadeIn(moduleMessage,2),4===this.readyState)200<=this.status&&201!==this.status&&204!==this.status&&300>this.status?(message.innerText=n,l.style.display="block",i&&setTimeout(function(){window.location=i},1400)):302===this.status?(message.innerText=this.responseText,console.log(this.responseText)):201===this.status?(Object.assign(s,JSON.parse(this.responseText)),message.innerText=n,l.style.display="block"):204===this.status?(message.innerText=alreadyUpdated_str,l.style.display="block"):400<=this.status&&600>this.status&&(message.innerHTML=""===this.responseText?thereWasAnError:this.responseText,console.log(this.responseText),messageFailure.style.display="block"),setTimeout(function(){fadeOut(moduleMessage,2)},1500),setTimeout(function(){message.innerText="",l.style.display=messageFailure.style.display="none"},6e3);else return;r(s)},request.send(e)})}function changeFunction(e,t,a,l,n,s){var i=new MutationObserver(function callback(i){var r,d=_createForOfIteratorHelper(i);try{for(d.s();!(r=d.n()).done;){var c=r.value;"attributes"===c.type&&(n.classList.contains(s)?(e.removeEventListener(t,a,!0),e.addEventListener(t,l,!0)):(e.addEventListener(t,a,!0),e.removeEventListener(t,l,!0)))}}catch(e){d.e(e)}finally{d.f()}});return i.observe(n,{attributes:!0}),!1}function truncateString(e,t){return e.length<=t+3?e:e.includes(".jpg")?e.slice(0,t)+"...jpg":e.includes(".png")?e.slice(0,t)+"...png":e.includes(".pdf")?e.slice(0,t)+"...pdf":e.includes(".svg")?e.slice(0,t)+"...svg":e.slice(0,t)+"..."}var abortDrag=!1,imagePositionInput=document.getElementById("image-position-input");function dragElement(t){function e(t){!1===abortDrag&&(t=t||window.event,t.preventDefault(),s=t.clientY,document.onmouseup=l,document.onmousemove=a)}function a(a){var l,i,r;if(!1===abortDrag){a=a||window.event,a.preventDefault(),n=s-a.clientY,s=a.clientY,l=t.clientWidth,i=t.clientHeight,r=.7*(.8*l);var d=t.offsetTop-n;0>d?(t.style.top=d+"px",i+d<r&&(t.style.top=0-(i-r)+"px")):t.style.top="0",imagePositionInput&&(imagePositionInput.value=d)}}function l(){document.onmouseup=null,document.onmousemove=null}var n=0,s=0;t.onmousedown=e}function openDragUI(){imageInstructions.innerHTML=dragToMove,featuredImageContainer.style.cursor="move",featuredImageMenu.style.display="none",imageSaveContainer.style.display="block",imageInstructions.style.display="block",imageInstructions.style.opacity="1",selectedMedia.querySelector("img").dataset.id&&(featuredImageElement.dataset.id=selectedMedia.querySelector("img").dataset.id),featuredImageElement.style.transform="translateY(0)",featuredImageElement.style.top=initialImagePosition*featuredImageElement.clientHeight/100+"px",abortDrag=!1,imagePositionInput.dataset.edited=!0,dragElement(featuredImageElement),setTimeout(function(){fadeOut(imageInstructions,2)},3e3)}function closeDragUI(){featuredImageContainer.classList.remove("menu-open"),abortDrag=!0,imageSaveContainer.style.display=imageInstructions.style.display="none",featuredImageMenu.style.display="block",featuredImageContainer.style.cursor="pointer"}var dragSrcEl;function dragStart(t){dragSrcEl=this,t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/html",this.outerHTML)}function dragEnter(){this.classList.add("over")}function dragLeave(t){t.stopPropagation(),this.classList.remove("over")}function dragOver(t){return t.preventDefault(),t.dataTransfer.dropEffect="move",!1}function dragDrop(t){if(dragSrcEl!==this){var e=this.parentNode,a=new DOMParser().parseFromString(t.dataTransfer.getData("text/html"),"text/html");this.classList.remove("over"),dragSrcEl.innerHTML=this.innerHTML,e.replaceChild(a.activeElement.children[0],e.childNodes[3])}return!1}function dragEnd(){this.classList.remove("over")}function dragDropify(e){return e.addEventListener("dragstart",dragStart,!0),e.addEventListener("dragenter",dragEnter,!0),e.addEventListener("dragover",dragOver,!0),e.addEventListener("dragleave",dragLeave,!0),e.addEventListener("drop",dragDrop,!0),e.addEventListener("dragend",dragEnd,!0),!1}function openYTE(){_body.classList.add("module-open"),fadeIn(ytModule,.2)}function closeYTE(){_body.classList.remove("module-open"),fadeOut(ytModule,.2),document.onkeydown=function(t){if(37===t.keyCode||39===t.keyCode)return!0}}document.getElementById("close-yt")&&document.getElementById("close-yt").addEventListener("click",function(t){t.preventDefault(),closeYTE()},!1);function closeModule(){_body.classList.remove("module-open"),0===document.getElementsByClassName("media-library").length&&(imageDetails.style.visibility="hidden",imageDetails.style.opacity="0"),chooseImage&&(chooseImage.style.display="block"),fadeOut(_module,.2),document.onkeydown=function(t){if(37===t.keyCode||39===t.keyCode)return!0}}function openModule(t){t.preventDefault(),spinnerImage.style.display="block",spinnerImage.style.opacity="1",selectedMedia.firstChild.style.opacity="0",selectedMedia.firstChild.onload=function(){selectedMedia.firstChild.style.opacity="1",spinnerImage.style.display="none",spinnerImage.style.opacity="0"},"VIDEO"===selectedMedia.firstChild.tagName&&(selectedMedia.firstChild.style.opacity="1",spinnerImage.style.display="none",spinnerImage.style.opacity="0"),setTimeout(function(){if("VIDEO"===selectedMedia.firstChild.tagName)selectedMedia.firstChild.style.opacity="1",spinnerImage.style.display="none",spinnerImage.style.opacity="0";else{var e=getAverageRGB(selectedMedia.firstChild);160>e.r+e.g+e.b?(document.getElementById("selected-media-container").classList.replace("black-background","white-background"),document.querySelectorAll(".icon-jpress").forEach(function(e){e.classList.replace("black-background","white-background")})):(document.getElementById("selected-media-container").classList.replace("white-background","black-background"),document.querySelectorAll(".icon-jpress").forEach(function(e){e.classList.replace("white-background","black-background")}))}},100),_body.classList.contains("module-open")?(_module.style.display="block",selectedMedia.firstChild.style.opacity="0"):(_body.classList.add("module-open"),fadeIn(_module,.2))}0<moduleLinks.length&&(moduleLinksArray=Array.prototype.slice.call(moduleLinks),moduleLinksArray.forEach(function(e){e.addEventListener("click",openModule,!1)})),moduleClose&&(moduleClose.addEventListener("click",closeModule,!1),moduleClose.addEventListener("click",function(){_body.classList.remove("tinymce-image-module"),_body.classList.remove("parallax-background-select"),document.onclick=null},!1),window.onkeydown=function(t){0<document.getElementsByClassName("module-open").length&&!0!==_module.classList.contains("fullscreen")&&27===t.keyCode&&(closeModule(),document.onclick=null),_module.classList.contains("fullscreen")&&27===t.keyCode&&_module.classList.remove("fullscreen")});function moduleHandler(e){if(selectedMediaThumb="thumbnails/"+e.dataset.name.substr(0,e.dataset.name.lastIndexOf("."))+"-thumbnail.jpg",-1<e.dataset.name.indexOf(".mp4")){var a=document.createElement("VIDEO");a.autoplay=!0,a.playsinline=!0,a.muted=!0,a.controls=!0;var l=document.createElement("SOURCE");l.src=e.href,l.type="video/mp4",a.appendChild(l),selectedMedia.firstChild.replaceWith(a),deleteInput.value=e.dataset.name+","+selectedMediaThumb}else{if("VIDEO"===selectedMedia.firstChild.tagName){var n=document.createElement("IMG");selectedMedia.firstChild.replaceWith(n)}-1<e.dataset.name.indexOf(".pdf")?(selectedMedia.firstChild.src=e.href.replace(".pdf",".jpg"),deleteInput.value=e.dataset.name+","+selectedMediaThumb+","+e.dataset.name.replace(".pdf",".jpg")):(selectedMedia.firstChild.src=e.href,deleteInput.value=_body.classList.contains("webp-server-support")?-1<e.href.indexOf(".jpg")?e.dataset.name+","+e.dataset.name.replace(".jpg",".webp")+","+selectedMediaThumb+","+selectedMediaThumb.replace(".jpg",".webp"):-1<e.href.indexOf(".png")?e.dataset.name+","+e.dataset.name.replace(".png",".webp"):e.dataset.name:-1<e.href.indexOf(".jpg")?e.dataset.name+","+selectedMediaThumb:e.dataset.name)}copyUrl.value=e.href,imageAlt.value=e.dataset.alt,fileNameText.innerHTML=fileNameInput.value=truncateString(e.dataset.name,10),fileSizeText.innerHTML=1e3>e.dataset.size/1024?(e.dataset.size/1024).toFixed(0)+" kB":(e.dataset.size/1000024).toFixed(1)+" MB",photoCredit.value=e.dataset.credit,captionInput.value=e.dataset.caption,selectedMedia.firstChild.draggable=!1,_index=moduleLinksArray.indexOf(e),nextItem=_index<moduleLinksArray.length-1?moduleLinksArray[_index+1]:moduleLinksArray[0],previousItem=1<=_index?moduleLinksArray[_index-1]:moduleLinksArray[moduleLinksArray.length-1],selectedMedia.parentNode.onclick=function(t){var e=this.innerWidth||this.clientWidth,a=t.target.getBoundingClientRect(),l=t.clientX-a.left;"fullscreen-button"===t.target.id?(!0===_module.classList.contains("fullscreen")?(window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height)&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):_module.requestFullscreen?_module.requestFullscreen():_module.mozRequestFullScreen?_module.mozRequestFullScreen():_module.webkitRequestFullscreen?_module.webkitRequestFullscreen():_module.msRequestFullscreen&&_module.msRequestFullscreen(),_module.classList.toggle("fullscreen")):l<e/2?previousItem.click():nextItem.click()},document.onkeydown=function(t){if("input"!==t.target.nodeName.toLowerCase()&&"textarea"!==t.target.nodeName.toLowerCase())switch(t.keyCode){case 39:nextItem.click();break;case 37:t.preventDefault(),previousItem.click();}},document.onclick=function(){!1===_module.querySelector(".module-inner").contains(event.target)&&!1===e.contains(event.target)&&moduleClose.click()};var t=document.getElementById("delete-file");t.onsubmit=function(t){t.preventDefault();var a=confirm(yourAboutToDeleteThisFilePermanently);if(a){var l=deleteInput.value;dbQuery("filename="+l,"/jp-includes/delete/delete-file.php","application/x-www-form-urlencoded",messageDeleted,deleted_str),_body.classList.remove("module-open"),_module.style.display="none",e.parentElement.parentElement.parentElement&&e.parentElement.parentElement.parentElement.removeChild(e.parentElement.parentElement);for(var n=0;n<moduleLinksArray.length;n++)moduleLinksArray[n]===e&&moduleLinksArray.splice(n,1)}}}function insertImage(){if(_body.classList.contains("parallax-background-select"))return _body.classList.remove("parallax-background-select"),void _body.classList.remove("tinymce-image-module");var e,t,a,l=selectedMedia.querySelector("img").src.replace(window.location.origin,""),n=l.substr(l.lastIndexOf(".")+1);t=0<photoCredit.value.length?"<small>FOTO: "+photoCredit.value+"</small>":"",a=0<captionInput.value.length?captionInput.value+"<br>":"",e=captionSwitch.checked?"<figure class=\"image\"><img class=\"fade-in\" alt=\""+imageAlt.value+"\" src=\""+l+"\" width=\""+selectedMedia.querySelector("img").naturalWidth+"\" height=\""+selectedMedia.querySelector("img").naturalHeight+"\" /><figcaption>"+a+t+"</figcaption></figure>":"<img class=\"fade-in\" alt=\""+imageAlt.value+"\" src=\""+l+"\" width=\""+selectedMedia.querySelector("img").naturalWidth+"\" height=\""+selectedMedia.querySelector("img").naturalHeight+"\" />",tinymce.activeEditor.insertContent(e),_body.classList.remove("tinymce-image-module")}captionSwitch&&captionSwitch.addEventListener("change",function(){captionInput.classList.toggle("hidden")},!1);var delUser=document.getElementById("delete-user");if(delUser){var delUserBtn=Array.prototype.slice.call(delUser.getElementsByTagName("button"));delUser.addEventListener("submit",function(t){t.preventDefault()},!1),delUserBtn.forEach(function(e){e.onclick=function(){var t=confirm(yourAboutToDeleteThisUserPermanently);if(t){var a=e.name;dbQuery("user-to-delete="+a,"/jp-includes/delete/delete-user.php","application/x-www-form-urlencoded",messageDeleted,deleted_str),e.parentElement.parentElement.parentElement.removeChild(e.parentElement.parentElement)}}})}if(0<document.getElementsByClassName("textarea").length&&0<document.getElementsByClassName("logged-in").length){var textareas=document.querySelectorAll(".textarea");textareas.forEach(function(e){var t=e.querySelectorAll("figure");0<t.length&&t.forEach(function(e){e.querySelector("img")})})}function saveAlt(e){newAlt=imageAlt.value,newCredit=photoCredit.value,newCaption=customEncode(captionInput.value);var t=e.dataset.id,a="save-image-details&image-alt="+newAlt+"&photo-credit="+newCredit+"&image-caption="+newCaption+"&image-id="+t;e.dataset.alt=newAlt,e.dataset.credit=newCredit,e.dataset.caption=newCaption,dbQuery(a,"/jp-includes/update/update-alt.php","application/x-www-form-urlencoded",messageSuccess,saved_str),_body.classList.remove("module-open"),_module.style.display="none"}adminPanelButton.addEventListener("click",function(t){t.preventDefault(),adminPanelButton.classList.toggle("permanently-unhide"),adminPanel.classList.toggle("permanently-unhide")},!1),document.addEventListener("click",function(t){!0!==adminPanel.contains(t.target)&&!0!==adminPanelButton.contains(t.target)&&(adminPanelButton.classList.remove("permanently-unhide"),adminPanel.classList.remove("permanently-unhide"))},!passiveSupported||{passive:!0,capture:!0}),document.addEventListener("mousemove",function(t){!0!==_body.classList.contains("module-open")&&(15>t.clientX?(adminPanel.focus(),adminPanelButton.classList.remove("hide"),adminPanel.classList.remove("hide"),"undefined"!=typeof tinymce&&tinymce.EditorManager.activeEditor.getElement().blur()):240<t.clientX&&(adminPanel.blur(),adminPanelButton.classList.add("hide"),adminPanel.classList.add("hide")))},!passiveSupported||{passive:!0,capture:!0});var logoutImage=document.getElementsByClassName("logged-in-message-text")[0],logoutMenu=document.getElementsByClassName("user-menu")[0];mobile?logoutImage.querySelector("a").addEventListener("click",function(t){t.preventDefault(),logoutMenu.classList.add("show")},!1):logoutImage.addEventListener("mouseover",function(){setTimeout(function(){logoutMenu.classList.add("show")},200)},!passiveSupported||{passive:!0,capture:!0}),document.addEventListener("click",function(t){var e=logoutMenu.contains(t.target)||logoutImage.contains(t.target);e||(logoutMenu.style.opacity="0",setTimeout(function(){logoutMenu.classList.remove("show"),logoutMenu.removeAttribute("style")},200))},!!passiveSupported&&{passive:!0});var articlesToggle=document.getElementById("admin-articles-toggle");articlesToggle&&articlesToggle.addEventListener("click",function(t){t.preventDefault(),articlesToggle.parentElement.classList.toggle("current-menu-item"),articlesToggle.classList.toggle("rotate"),document.getElementById("admin-articles-list").classList.toggle("show")},!1);var pageDelButtons,pageDeleteForm=document.getElementById("delete-article-form");pageDeleteForm&&(pageDelButtons=pageDeleteForm.getElementsByTagName("button"),pageDeleteForm.addEventListener("submit",function(t){t.preventDefault()},!1),Array.prototype.slice.call(pageDelButtons).forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var a=confirm(yourAboutToDeleteThisArticlePermanently);if(a){var l="article-to-delete="+e.name;dbQuery(l,"/jp-includes/delete/delete-article.php","application/x-www-form-urlencoded",messageDeleted,deleted_str),window.location.href===hostName+"/"+e.name+"/"&&(window.location.href=hostName)}},!1)})),document.addEventListener("keydown",function(t){(window.navigator.platform.match("MacIntel")?t.metaKey:t.ctrlKey)&&83==t.keyCode&&(t.preventDefault(),document.activeElement.classList.contains("textarea")&&document.activeElement.closest("form").querySelector(".jp-save-changes")?document.activeElement.closest("form").querySelector(".jp-save-changes").click():0<document.getElementsByClassName("jp-open").length?document.getElementsByClassName("jp-open")[0].closest("form").querySelector(".jp-save-changes").click():document.querySelectorAll(".jp-save-changes").forEach(function(e){e.click()}))},!1),copyUrl&&copyUrl.addEventListener("click",function(){this.select(),document.execCommand("copy"),copyTooltip.innerHTML=copied_str+"!",setTimeout(function(){copyTooltip.innerHTML=copyLink_str+":"},4e3)},!1);function customEncode(e){return encodeURIComponent(e).replace(/'/g,"%27")}function activityWatcher(){function e(){t=0}var t=0;setInterval(function(){t++,t>1800&&(loginModule.style.display="block")},1e3);["mousedown","keydown","touchstart"].forEach(function(t){document.addEventListener(t,e,!passiveSupported||{passive:!0,capture:!0})})}activityWatcher();function slugify(e){e=e.replace(/^\s+|\s+$/g,""),e=e.toLowerCase();for(var t="\xE0\xE1\xE4\xE2\xE8\xE9\xEB\xEA\xEC\xED\xEF\xEE\xF2\xF3\xF6\xF4\xF9\xFA\xFC\xFB\xF1\xE7\xB7/_,:;",a=0,n=t.length;a<n;a++)e=e.replace(new RegExp(t.charAt(a),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(a));return e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),e}function baseName(e){var t=(e+"").substring(e.lastIndexOf("/")+1);return-1!=t.lastIndexOf(".")&&(t=t.substring(0,t.lastIndexOf("."))),t}function fileExtension(e){var t=(e+"").substring(e.lastIndexOf(".")+1);return t}function sidePanel(e,t){e.preventDefault(),imageDetails.style.visibility=imgSaveBtn.style.visibility="visible",imageDetails.style.opacity=imgSaveBtn.style.opacity="1",chooseImage&&(chooseImage.style.display="none"),selectedMedia.firstChild.dataset.id=t.dataset.id,copyUrl.value=selectedMedia.querySelector("img")?selectedMedia.querySelector("img").src=t.href:selectedMedia.querySelector("source").src=t.href,fileNameText.innerHTML=truncateString(t.dataset.name,10),fileSizeText.innerHTML=(t.dataset.size/1024).toFixed(0)+" kB",imageAlt.value=t.dataset.alt,photoCredit.value=t.dataset.credit,captionInput.value=t.dataset.caption}if(mediaLibrary){var featuredLinks=mediaLibrary.getElementsByTagName("a");Array.prototype.slice.call(featuredLinks).forEach(function(t){t.addEventListener("click",function(e){sidePanel(e,t)},!1)}),0===document.getElementsByClassName("media-library").length&&imgSaveBtn.addEventListener("click",function(){if(featuredImageElement&&!0!==_body.classList.contains("tinymce-image-module"))featuredImageInput.value=featuredImageElement.src=selectedMedia.querySelector("img").src;else if(this.dataset.target!==void 0){var e=document.querySelector("."+this.dataset.target);e.style.backgroundImage="url("+selectedMedia.querySelector("img").src+")",e.querySelector(".background-image").value=selectedMedia.querySelector("img").src,e.querySelector(".content").style.transform="translateY(0)"}closeModule()},!1)}function switchReveal(e,t,a,l){t.addEventListener("change",function(){e.classList.toggle("active"),l&&a&&l.checked&&(l.checked=!1,a.classList.toggle("active"))},!1)}function hex2RGB(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function multiRGB(e){var t=hex2RGB(e);return t.r+t.g+t.b}if(isSettings()){var mlSwitch=document.getElementById("ml-switch"),gfWrapper=document.getElementById("google-fonts-wrapper"),gfSwitchElement=document.getElementById("gf-switch"),tkWrapper=document.getElementById("typekit-wrapper"),tkSwitchElement=document.getElementById("tk-switch"),reCAPTCHASwitchElement=document.getElementById("recaptcha-switch"),gCalSwitchElement=document.getElementById("gcal-switch"),sendgridSwitchElement=document.getElementById("sendgrid-switch"),tabMenu=document.getElementById("settings-main-menu"),tabMenuLinks=tabMenu.querySelectorAll("a"),formGroups=Array.prototype.slice.call(document.getElementsByClassName("form-group-expandable"));document.addEventListener("click",function(){event.target.classList.contains("form-group-expandable")||_body.classList.contains("module-open")||formGroups.forEach(function(e){e.classList.remove("wide")})},!passiveSupported||{passive:!0,capture:!0}),document.onkeydown=function(t){("Escape"===t.key||"Esc"===t.key)&&formGroups.forEach(function(e){e.classList.remove("wide")})},formGroups.forEach(function(e){e.addEventListener("click",function(){formGroups.forEach(function(e){e.classList.remove("wide")}),this.classList.add("wide")},!passiveSupported||{passive:!0,capture:!0})}),tabMenuLinks.forEach(function(t){var a=t.href.split("#").slice(-1)[0],l=t.parentElement.nextElementSibling,n=t.parentElement.previousElementSibling;t.addEventListener("click",function(s){s.preventDefault(),l&&l.classList.contains("current")&&(l.getElementsByTagName("a")[0].classList.remove("previous"),l.getElementsByTagName("a")[0].classList.add("next")),n&&n.classList.contains("current")&&(n.getElementsByTagName("a")[0].classList.remove("next"),n.getElementsByTagName("a")[0].classList.add("previous")),Array.prototype.slice.call(tabMenu.getElementsByTagName("li")).forEach(function(e){e.classList.remove("current")}),t.parentElement.classList.toggle("current"),document.querySelectorAll(".form-wrapper").forEach(function(e){e.style.display="none"}),document.getElementById(a).style.display="block"},!1)}),switchReveal(document.getElementById("ml-wrapper"),mlSwitch),switchReveal(gfWrapper,gfSwitchElement,tkWrapper,tkSwitchElement),switchReveal(tkWrapper,tkSwitchElement,gfWrapper,gfSwitchElement),switchReveal(document.getElementById("recaptcha-wrapper"),reCAPTCHASwitchElement),switchReveal(document.getElementById("gcal-wrapper"),gCalSwitchElement),switchReveal(document.getElementById("sendgrid-api-key"),sendgridSwitchElement),switchReveal(document.getElementById("fb-page"),document.getElementById("fb-page-switch")),switchReveal(document.getElementById("twitter-page"),document.getElementById("twitter-page-switch")),switchReveal(document.getElementById("ig-page"),document.getElementById("ig-page-switch")),switchReveal(document.getElementById("yt-page"),document.getElementById("yt-page-switch")),switchReveal(document.getElementById("spotify-profile"),document.getElementById("spotify-switch")),switchReveal(document.getElementById("li-page"),document.getElementById("li-page-switch")),switchReveal(document.getElementById("ta-page"),document.getElementById("ta-switch"));var logoPreview=document.getElementById("logo-preview");logoPreview.innerHTML=codeEditorLogo.getValue(),document.getElementById("logo-input").querySelector(".code-input-field").addEventListener("keyup",function(){logoPreview.innerHTML=codeEditorLogo.getValue()},!1);var menuHandlers,menuHandlersArray,editMenu=document.getElementById("header-menu-edit");editMenu&&(menuHandlersArray=Array.prototype.slice.call(editMenu.getElementsByClassName("menu-item-handle")),menuHandlersArray.forEach(function(e){dragDropify(e)}));var siteInfo=document.getElementById("siteinfo");siteInfo.addEventListener("submit",function(t){t.preventDefault();var e,a,l,n,s,i,r,d,c,o=document.getElementById("sitename").value,m=document.getElementById("legal-name").value,g=document.getElementById("site-desc").value,u=encodeURIComponent(codeEditorLogo.getValue()),p=featuredImageInput.value,y=document.getElementById("theme-color").value,h=document.getElementById("secondary-color").value,E=document.getElementById("white-color").value,v=document.getElementById("theme-color-contrast").value;290>multiRGB(y)?(n=s=i=E,e=a=l=y,210<multiRGB(y)&&(a="333",210>multiRGB(h)&&(a=h)),310<multiRGB(h)&&(n=h,370>multiRGB(h)&&(e=h)),350<multiRGB(v)&&(i=v)):320>multiRGB(h)?(n=s=i=e=a=l=h,multiRGB(h)<multiRGB(y)&&450>multiRGB(y)&&(e=y)):(n=370<multiRGB(h)?e=h:i=e=l="333",s=a="333"),450>multiRGB(v)&&(l=v,350<multiRGB(y)&&(i=v)),290>multiRGB(h)?(r=d=c=E,310<multiRGB(y)&&(r=y),350<multiRGB(v)&&(c=v)):320>multiRGB(y)?r=d=c=y:r=d=c="333";var f={whiteBackground:{headline:e,body:a,link:l},themeBackground:{headline:n,body:s,link:i},secondaryBackground:{headline:r,body:d,link:c}},k=JSON.stringify(f),L=document.getElementById("tags").value,b=document.getElementById("main-email").value,B="";document.getElementById("mail-header-switch").checked&&(B="checked");var I="";document.getElementById("phone-header-switch").checked&&(I="checked");var w,T=encodeURIComponent(document.getElementById("telephone").value),S=encodeURIComponent(tinymce.get("cf-receipt-body").getContent());document.getElementById("cf-receipt-body-alt-lang")&&(w=encodeURIComponent(tinymce.get("cf-receipt-body-alt-lang").getContent()));var x="";document.getElementById("tracking-head-switch").checked&&(x="checked");var q=encodeURIComponent(codeEditorHead.getValue()),C="";document.getElementById("tracking-body-switch").checked&&(C="checked");var N=encodeURIComponent(codeEditorBody.getValue()),H="";document.getElementById("code-footer-switch").checked&&(H="checked");var j=encodeURIComponent(codeEditorFooter.getValue()),D="";document.getElementById("custom-shortcode-switch").checked&&(D="checked");var M=encodeURIComponent(codeEditorShortcode.getValue()),A="";document.getElementById("custom-cursor").checked&&(A="checked");var O="";document.getElementById("to-the-top-switch").checked&&(O="checked");var F="";document.getElementById("sm-switch").checked&&(F="checked");var z="";mlSwitch.checked&&(z="checked");var P="";document.getElementById("none-switch").checked&&(P="checked");var R=document.getElementById("csp").value,V=document.getElementById("alt-lang-1").value,Y=document.getElementById("alt-lang-1-sitedesc").value,U="";document.getElementById("some-share-switch").checked&&(U="checked");var K=document.getElementById("fb-page-id").value,W=document.getElementById("fb-app-id").value,_=document.getElementById("fb-app-secret").value,X=document.getElementById("fb-page").value,G="";document.getElementById("fb-connect-switch").checked&&(G="checked");var J="";document.getElementById("fb-page-switch").checked&&(J="checked");var Q=document.getElementById("twitter-page").value,Z="";document.getElementById("twitter-page-switch").checked&&(Z="checked");var $=document.getElementById("ig-account-id").value,ee=document.getElementById("ig-user-id").value,te=document.getElementById("ig-app-id").value,ae=document.getElementById("ig-app-secret").value,le=document.getElementById("ig-page").value,ne="";document.getElementById("ig-page-switch").checked&&(ne="checked");var se=document.getElementById("yt-page").value,ie="";document.getElementById("yt-page-switch").checked&&(ie="checked");var re=document.getElementById("spotify-profile").value,de="";document.getElementById("spotify-switch").checked&&(de="checked");var ce=document.getElementById("li-page").value,oe="";document.getElementById("li-page-switch").checked&&(oe="checked");var me=document.getElementById("ta-page").value,ge="";document.getElementById("ta-switch").checked&&(ge="checked");var ue="";document.getElementById("gf-switch").checked&&(ue="checked");var pe="";document.getElementById("gm-switch").checked&&(pe="checked");var ye="";gCalSwitchElement.checked&&(ye="checked");var he="";document.getElementById("contest-switch").checked&&(he="checked");var Ee="";reCAPTCHASwitchElement.checked&&(Ee="checked");var ve="";sendgridSwitchElement.checked&&(ve="checked");var fe=document.getElementById("gCal-clientId").value,ke=document.getElementById("gCal-projectId").value,Le=document.getElementById("gCal-clientSecret").value,be=document.getElementById("reCAPTCHA-siteKey").value,Be=document.getElementById("reCAPTCHA-serverKey").value,Ie=document.getElementById("google-api-key").value,we=document.getElementById("sendgrid-api-key").value,Te="";""!==fontBodyInput.value&&!1!==fontBodyInput&&(fontHeadingInput.value===fontBodyInput.value?Te=encodeURIComponent(document.getElementById("font-"+slugify(fontBodyInput.value)).innerHTML):Te=encodeURIComponent(document.getElementById("font-"+slugify(fontBodyInput.value)).innerHTML+document.getElementById("font-"+slugify(fontHeadingInput.value)).innerHTML));var Se="",xe=document.getElementById("tk-switch").checked;!0===xe&&(Se="checked");var qe=encodeURIComponent(tkStylesheetEditor.getValue()),Ce=customEncode(document.getElementById("tk-font-family").value),Ne=customEncode(document.getElementById("tk-font-family-header").value),He="";document.getElementById("robots-switch").checked&&(He="checked");var je,De=document.getElementById("jp-lang").value,Me=document.getElementById("backend-lang").value;document.getElementById("native-font")&&(je=document.getElementById("native-font").value);var Ae="save&sitename="+o+"&legal-name="+m+"&site-desc="+g+"&tags="+L+"&main-email="+b+"&telephone="+T+"&mail-header-switch="+B+"&phone-header-switch="+I+"&cf-receipt-body="+S+"&cf-receipt-body-alt-lang="+w+"&logo="+u+"&featured-image-site="+p+"&theme-color="+y+"&secondary-color="+h+"&theme-color-contrast="+v+"&white-color="+E+"&font-color="+k+"&font-heading="+fontHeadingInput.value+"&font-body="+fontBodyInput.value+"&font-face="+Te+"&tk-switch="+Se+"&tk-stylesheet="+qe+"&tk-font-family="+Ce+"&tk-font-family-header="+Ne+"&tracking-head-switch="+x+"&tracking-head="+q+"&tracking-body-switch="+C+"&tracking-body="+N+"&code-footer-switch="+H+"&code-footer="+j+"&custom-shortcode-switch="+D+"&custom-shortcode="+M+"&some-share-switch="+U+"&fb-page-id="+K+"&fb-app-id="+W+"&fb-app-secret="+_+"&fb-page="+X+"&fb-page-switch="+J+"&twitter-page="+Q+"&twitter-page-switch="+Z+"&ig-account-id="+$+"&ig-user-id="+ee+"&ig-app-id="+te+"&ig-app-secret="+ae+"&ig-page="+le+"&ig-page-switch="+ne+"&yt-page="+se+"&yt-page-switch="+ie+"&spotify-profile="+re+"&spotify-switch="+de+"&li-page="+ce+"&li-page-switch="+oe+"&gf-switch="+ue+"&custom-cursor="+A+"&robots-switch="+He+"&lang="+De+"&ml-switch="+z+"&alt-lang-1="+V+"&alt-lang-1-sitedesc="+Y+"&ta-page="+me+"&ta-switch="+ge+"&sm-switch="+F+"&recaptcha-switch="+Ee+"&reCAPTCHA-siteKey="+be+"&reCAPTCHA-serverKey="+Be+"&google-api-key="+Ie+"&sendgrid-switch="+ve+"&sendgrid-api-key="+we+"&native-font="+je+"&gm-switch="+pe+"&contest-switch="+he+"&fb-connect-switch="+G+"&to-the-top-switch="+O+"&gcal-switch="+ye+"&gcal-client-id="+fe+"&gcal-client-secret="+Le+"&gcal-project-id="+ke+"&backend-lang="+Me+"&nonce-switch="+P+"&csp="+R;dbQuery(Ae,"/jp-includes/update/update-siteinfo.php","application/x-www-form-urlencoded",messageSuccess,saved_str)},!1),document.getElementById("theme-color-label").innerHTML+=" <small>\xAB"+ntc.name(themeColor)+"\xBB</small>",document.getElementById("secondary-color-label").innerHTML+=" <small>\xAB"+ntc.name(secondaryColor)+"\xBB</small>",document.getElementById("theme-color-contrast-label").innerHTML+=" <small>\xAB"+ntc.name(contrastColor)+"\xBB</small>",document.getElementById("white-color-label").innerHTML+=" <small>\xAB"+ntc.name(whiteColor)+"\xBB</small>"}if(0<document.getElementsByClassName("media-library").length){deleteInput=document.getElementById("delete-file-input");var uploadForm=document.getElementById("upload-form");uploadForm.addEventListener("submit",function(t){t.preventDefault(),spinnerGlobal.style.display="block",spinnerGlobal.style.opacity="1";var e=Array.prototype.slice.call(document.getElementById("fileToUpload").files);e.forEach(function(e){formData.append("file[]",e)}),request.open("POST","/jp-includes/insert/upload-request.php",!0),request.onreadystatechange=function(){(spinnerGlobal.style.display="none",spinnerGlobal.style.opacity="0",message.innerText="",messageSuccess.style.display=messageFailure.style.display="none",mediaLibrary.classList.add("push-up"),uploadForm.classList.remove("file-selected"),label.querySelector(".upload-label").innerHTML=uploadImage_str,fadeIn(moduleMessage,2),4===this.readyState)&&(200<=this.status&&300>this.status?(message.innerText=theUploadSucceeded,messageSuccess.style.display="block",e.forEach(function(e){var t=document.createElement("li"),l=document.createElement("div"),n=document.createElement("a"),a=document.createElement("div"),s=document.createElement("img"),r=document.createElement("span");r.classList.add("mimetype-icon"),l.classList.add("preview-holder"),a.classList.add("centered"),n.classList.add("module-link"),n.setAttribute("role","checkbox"),n.setAttribute("tabindex","0");for(var d=e.name.replace(/\s/g,"_"),c=baseName(d),o=fileExtension(d).toLowerCase(),m=0;m<moduleLinksArray.length;m++)for(;moduleLinksArray[m].dataset.name===d;)c=c+"_"+m,d=c+"."+o,m++;n.dataset.alt="",n.dataset.name=c+"."+o,n.dataset.id=request.responseText,n.dataset.size=e.size,n.dataset.credit="",n.dataset.caption="","pdf"===o||"jpg"===o||"jpeg"===o||"mp4"===o?(s.src="/uploads/thumbnails/"+c+"-thumbnail.jpg","pdf"===o?n.href="/uploads/"+c+".jpg":(n.href="/uploads/"+c+"."+o,35e4<e.size&&(e.width>e.height&&1400<e.width?n.dataset.size=(.8*(e.size/(e.width/700))).toFixed(0):e.width<e.height&&1400<e.height?n.dataset.size=(.8*(e.size/(e.height/700))).toFixed(0):n.dataset.size=.8*e.size))):s.src=n.href="/uploads/"+c+"."+o,("mp4"===o||"pdf"===o)&&("mp4"==o?r.classList.add("icon-film-camerajpress"):r.classList.add("icon-articlejpress"),a.appendChild(r)),a.appendChild(s),n.appendChild(a),l.appendChild(n),t.appendChild(l),mediaLibrary.insertBefore(t,mediaLibrary.childNodes[0]),moduleLinksArray.unshift(n),n.addEventListener("click",openModule,!1),n.addEventListener("click",function(){moduleHandler(n),imgSaveBtn.onclick=function(){return saveAlt(n),setTimeout(function(){closeModule()},1e3),!1}},!1),n.addEventListener("click",function(e){sidePanel(e,n)},!1)})):500<=this.status&&511>=this.status||400<=this.status&&413>this.status?(message.innerHTML=thereWasAnError,messageFailure.style.display="block",console.log(this.responseText)):413===this.status?(message.innerHTML=fileTooBig,messageFailure.style.display="block"):415===this.status?(message.innerHTML=thisFileTypeIsNotAllowed,messageFailure.style.display="block"):(message.innerHTML=thereWasAnError,messageFailure.style.display="block"),setTimeout(function(){fadeOut(moduleMessage,2)},1e3),setTimeout(function(){message.innerText="",messageSuccess.style.display=messageFailure.style.display="none"},6e3))},request.send(formData),e.forEach(function(e){formData.delete("file[]",e)})},!1);var inputs=document.getElementsByClassName("inputfile"),uploadButton=document.getElementById("upload"),label=document.getElementById("fileToUpload-label");Array.prototype.slice.call(inputs).forEach(function(t){var a=label.innerHTML;t.addEventListener("change",function(l){var e;if(e=this.files&&1<this.files.length?(this.dataset.multipleCaption||"").replace("{count}",this.files.length):l.target.value.split("\\").pop(),!e)label.innerHTML=a;else if(20<e.length){var n=e.substring(0,20);label.querySelector(".upload-label").innerHTML=n+"\u2026"}else label.querySelector(".upload-label").innerHTML=e;t.form.classList.add("file-selected"),mediaLibrary.classList.remove("push-up")},!1)}),moduleLinksArray&&moduleLinksArray.forEach(function(e){e.addEventListener("click",function(){moduleHandler(e),imgSaveBtn.onclick=function(){return saveAlt(e),setTimeout(function(){closeModule()},1e3),!1}},!1)})}function secOpts(e){e.classList.add("jp-open");var t;t=e.parentElement.classList.contains("theme-background")?"secondary-background":"theme-background",e.classList.add(t),e.querySelector(".section-menu").classList.add("show"),e.parentNode.style.overflow="visible",e.parentNode.style.zIndex="3"}function deleteSec(e,t){var a;event.preventDefault();var l=confirm(yourAboutToDeleteThisSectionPermanently);l&&(a="section-to-delete="+t,e.parentElement.parentElement&&e.parentElement.parentElement.removeChild(e.parentElement),dbQuery(a,"/jp-includes/delete/delete-section.php","application/x-www-form-urlencoded",messageDeleted,deleted_str))}function toggleBgMenu(e){event.preventDefault(),e.classList.toggle("show")}function toggleBg(e,t,a,l,n,s,i){e.value=e.value.includes("translucent")?t.value+" translucent":t.value,i.parentElement.classList.add(t.value),i.classList.add(a.value),i.parentElement.classList.remove(a.value),i.classList.remove(t.value),i.parentElement.classList.remove(l.value),i.classList.remove(l.value),i.parentElement.classList.remove(n.value),i.classList.remove(n.value),i.parentElement.classList.remove(s.value),t.id.includes("image-background-")||(i.parentElement.style.backgroundImage="none")}if(isHome()){imgSaveBtn.addEventListener("click",function(){insertImage()},!1);var sectionOptions=document.querySelectorAll(".edit-section");sectionOptions.forEach(function(e,t){var a=e.parentElement.querySelector(".class"),l=document.getElementById("edit-background-"+(t+1)),n=e.querySelector(".edit-background-options");if("edit-footer"!==e.id&&e.addEventListener("click",function(){secOpts(e)},!1),document.documentElement.addEventListener("click",function(t){!0!==e.contains(t.target)&&(e.classList.remove("jp-open"),e.classList.remove("theme-background"),e.classList.remove("secondary-background"),e.parentNode.style.overflow="hidden",e.parentNode.style.zIndex="auto",e.querySelector(".section-menu").classList.remove("show"),n&&n.classList.remove("show"))},!passiveSupported||{passive:!0,capture:!0}),l){var s=document.getElementById("theme-background-"+(t+1)),i=document.getElementById("secondary-background-"+(t+1)),r=document.getElementById("white-background-"+(t+1)),d=document.getElementById("black-background-"+(t+1)),c=document.getElementById("image-background-"+(t+1)),o=document.getElementById("translucence-switch-"+(t+1));l.addEventListener("click",function(){toggleBgMenu(n)},!1),s.addEventListener("change",function(){toggleBg(a,s,i,r,d,c,e)},!1),i.addEventListener("change",function(){toggleBg(a,i,s,r,d,c,e)},!1),r.addEventListener("change",function(){toggleBg(a,r,s,i,d,c,e)},!1),d.addEventListener("change",function(){toggleBg(a,d,s,i,r,c,e)},!1),o.addEventListener("change",function(){this.checked?(a.value+=" translucent",a.parentElement.classList.add("translucent")):(a.value=a.value.replace(" translucent",""),a.parentElement.classList.remove("translucent"))},!1),c.parentElement.querySelector("label").addEventListener("click",function(){c.checked=!0,toggleBg(a,c,s,i,r,d,e),a.value=c.value,imgSaveBtn.dataset.target=e.parentElement.classList[0],_body.classList.add("parallax-background-select")},!1),e.querySelector(".radio-list").getElementsByTagName("li")[0].querySelector("label").innerText=ntc.name(themeColor),e.querySelector(".radio-list").getElementsByTagName("li")[1].querySelector("label").innerText=ntc.name(secondaryColor),e.querySelector(".radio-list").getElementsByTagName("li")[2].querySelector("label").innerText=ntc.name(whiteColor)}var m=document.getElementById("delete-section-"+(t+1));if(m){var g=e.dataset.id;m.addEventListener("click",function(){deleteSec(e,g)},!1)}});var sectionText,sectionId,contentLang,contentClass,bgImage,arrayIndex,sectionsArray=Array.prototype.slice.call(document.getElementsByTagName("section"));sectionsArray.forEach(function(e,t){e.querySelector(".array-index").value=t+1});var newSection=document.createElement("section"),newInput1=document.createElement("input"),newInput2=document.createElement("input"),newInput3=document.createElement("input"),newInput4=document.createElement("input"),newInput5=document.createElement("input"),newDiv1=document.createElement("div"),newDiv2=document.createElement("div"),editDiv=document.createElement("div");editDiv.classList.add("edit-section"),editDiv.innerHTML=document.getElementsByClassName("edit-section")[1].innerHTML,editDiv.addEventListener("click",function(){secOpts(editDiv)},!1),document.documentElement.addEventListener("click",function(e){!0!==editDiv.contains(e.target)&&(editDiv.classList.remove("jp-open"),editDiv.classList.remove("theme-background"),editDiv.classList.remove("secondary-background"),editDiv.parentNode.style.overflow="hidden",editDiv.parentNode.style.zIndex="auto",editDiv.querySelector(".section-menu").classList.remove("show"),editDiv.querySelector(".edit-background-options")&&editDiv.querySelector(".edit-background-options").classList.remove("show"))},!passiveSupported||{passive:!0,capture:!0}),editDiv.getElementsByTagName("a")[0].addEventListener("click",function(){toggleBgMenu(editDiv.querySelector(".edit-background-options"))},!1);var bgInput1=editDiv.querySelector(".edit-background-options").getElementsByTagName("input")[0],bgInput2=editDiv.querySelector(".edit-background-options").getElementsByTagName("input")[1],bgInput3=editDiv.querySelector(".edit-background-options").getElementsByTagName("input")[2],bgInput4=editDiv.querySelector(".edit-background-options").getElementsByTagName("input")[3],bgLabel1=editDiv.querySelector(".edit-background-options").getElementsByTagName("label")[0],bgLabel2=editDiv.querySelector(".edit-background-options").getElementsByTagName("label")[1],bgLabel3=editDiv.querySelector(".edit-background-options").getElementsByTagName("label")[2];bgInput1.id="theme-background-"+(sectionsArray.length+1),bgInput1.name="background-options-"+(sectionsArray.length+1),bgInput1.checked=!1,bgInput2.id="secondary-background-"+(sectionsArray.length+1),bgInput2.name="background-options-"+(sectionsArray.length+1),bgInput2.checked=!1,bgInput3.id="white-background-"+(sectionsArray.length+1),bgInput3.name="background-options-"+(sectionsArray.length+1),bgInput3.checked=!0,bgInput4.id="translucence-switch-"+(sectionsArray.length+1),bgInput4.checked=!1,bgLabel1.setAttribute("for","theme-background-"+(sectionsArray.length+1)),bgLabel2.setAttribute("for","secondary-background-"+(sectionsArray.length+1)),bgLabel3.setAttribute("for","white-background-"+(sectionsArray.length+1)),bgInput1.addEventListener("click",function(){toggleBg(editDiv.parentElement.querySelector(".class"),bgInput1,bgInput2,bgInput3,!1,editDiv)},!1),bgInput2.addEventListener("click",function(){toggleBg(editDiv.parentElement.querySelector(".class"),bgInput2,bgInput1,bgInput3,!1,editDiv)},!1),bgInput3.addEventListener("click",function(){toggleBg(editDiv.parentElement.querySelector(".class"),bgInput3,bgInput1,bgInput2,!1,editDiv)},!1),newInput1.classList.add("array-index"),newInput1.name="array-index[]",newInput1.type="hidden",newInput1.value="",newInput2.classList.add("background-image"),newInput2.name="background-image[]",newInput2.type="hidden",newInput2.value="",newInput3.classList.add("class"),newInput3.name="class[]",newInput3.type="hidden",newInput3.value="white-background",newInput4.classList.add("content-lang"),newInput4.name="content-lang[]",newInput4.type="hidden",newInput4.value=siteLang,newInput5.classList.add("content-id"),newInput5.name="content-id[]",newInput5.type="hidden",newInput5.value="",newSection.classList.add("white-background"),newSection.classList.add("new-section"),newSection.classList.add("text"),newDiv1.classList.add("content"),newDiv2.classList.add("textarea"),newDiv2.innerHTML="<h2>"+headline_str+"</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>",newDiv1.appendChild(newDiv2),newSection.appendChild(newDiv1),newSection.appendChild(newInput1),newSection.appendChild(newInput2),newSection.appendChild(newInput3),newSection.appendChild(newInput4),newSection.appendChild(newInput5),newSection.appendChild(editDiv),document.querySelectorAll(".add-section").forEach(function(e){var t={};e.addEventListener("click",function(){tinymce.remove(),sectionsArray.splice(this.dataset.order,0,newSection);var e=document.querySelector(".section-"+this.dataset.order);e.parentNode.insertBefore(newSection,e.nextSibling),sectionsArray.forEach(function(e,t){e.querySelector(".array-index").value=t+1,setTimeout(function(){e.querySelector(".textarea").id="textarea-"+(t+1)},100)}),setTimeout(function(){tinymce.init(tinySettings)},200);var a="new-section&content-lang="+siteLang+"&array-index="+this.dataset.order;dbQuery(a,"/jp-includes/insert/add-section.php","application/x-www-form-urlencoded",messageSuccess,added_str,t).then(function(){editDiv.getElementsByTagName("a")[1].addEventListener("click",function(){deleteSec(editDiv,t.id)},!1),newInput5.value=t.id})})}),document.getElementById("update-frontpage").addEventListener("submit",function(t){var e,a=[[]];t.preventDefault(),sectionsArray.forEach(function(t,l){arrayIndex=t.querySelector(".array-index").value,bgImage=t.querySelector(".background-image").value,contentClass=t.querySelector(".class").value,contentLang=t.querySelector(".content-lang").value,sectionId=t.querySelector(".content-id").value,sectionText=encodeURIComponent(tinymce.get("textarea-"+(l+1)).getContent()),e="section-text="+sectionText+"&section-id="+sectionId+"&content-lang="+contentLang+"&class="+contentClass+"&background-image="+bgImage+"&array-index="+arrayIndex,a.push(queryStringToJSON(e))}),a.shift(),dbQuery(encodeURIComponent(JSON.stringify(a)),"/jp-includes/update/update-home.php","application/json",messageSuccess,saved_str)},!1)}if(isArticle()){var articleSlug=document.getElementById("article-slug"),translatedSlug=document.getElementById("translated-slug"),slugOutput=document.getElementById("slug-output"),slugHiddenInput=articleSlug.querySelector("input"),titleInput=document.getElementById("article-title");featuredImageContainer=document.getElementById("featured-image-container");var imageMenu;featuredImageContainer&&(imageInstructions=featuredImageContainer.querySelector(".instructions"),imageMenu=featuredImageContainer.querySelector(".image-menu"),initialImagePosition=imagePositionInput.dataset.value),featuredImageMenu=document.getElementById("edit-featured-image");var imagePosition=document.getElementById("image-position");imageSaveContainer=document.getElementById("image-buttons");var imageSave=document.getElementById("image-save"),imageCancel=document.getElementById("image-cancel"),slugInput=document.createElement("input");slugInput.value=slugOutput.innerHTML;var editSlug=articleSlug.querySelector("button");editSlug.onclick=function(){editSlug.classList.contains("edit")?(slugInput.parentNode.replaceChild(slugOutput,slugInput),editSlug.innerHTML="Rediger",editSlug.classList.remove("edit"),articleSlug.classList.add("edited")):(slugOutput.parentNode.replaceChild(slugInput,slugOutput),editSlug.innerHTML="OK",editSlug.classList.add("edit"))},slugInput.addEventListener("keyup",function(){slugHiddenInput.value=slugOutput.innerHTML=slugInput.value},!1),"new-article"===slugHiddenInput.value&&titleInput.addEventListener("keyup",function(){slugHiddenInput.value=slugOutput.innerHTML=slugify(titleInput.innerText)},!1),translatedSlug.addEventListener("keyup",function(){setTimeout(function(){translatedSlug.value=slugify(translatedSlug.value)},500)},!1),featuredImageContainer&&(featuredImageContainer.addEventListener("click",function(){featuredImageContainer.classList.toggle("menu-open"),document.getElementById("edit-featured-image-button").classList.toggle("theme-background"),_body.addEventListener("click",function(t){var e=featuredImageContainer.contains(t.target);!e&&featuredImageContainer.classList.contains("menu-open")&&(featuredImageContainer.classList.remove("menu-open"),document.getElementById("edit-featured-image-button").classList.remove("theme-background"))},!!passiveSupported&&{passive:!0})},!1),imagePosition.addEventListener("click",function(){featuredImageContainer.classList.remove("menu-open"),openDragUI()},!1),imgSaveBtn.addEventListener("click",openDragUI,!0),imageSave.addEventListener("click",function(t){t.preventDefault(),document.getElementById("original-featured-image").value=featuredImageInput.value,featuredImageId.value=featuredImageElement.dataset.id,closeDragUI()},!1),imageCancel.addEventListener("click",function(t){t.preventDefault(),closeDragUI(),imagePositionInput.dataset.edited=!0,imagePositionInput.value=initialImagePosition,featuredImageElement.style.transform="translateY("+initialImagePosition+"%)",featuredImageElement.style.top="0",featuredImageInput.value=featuredImageElement.src=document.getElementById("original-featured-image").value},!1));var updateArticle=document.getElementById("update-article");updateArticle.addEventListener("submit",function(t){if(t.preventDefault(),articleSlug.classList.contains("edited")){var u=confirm(youHaveChangedUrl);if(!u)return}var e,a=document.getElementById("page-id").value,l=encodeURIComponent(tinymce.get("article-title").getContent()),n=document.getElementById("slug-output").innerText,s=encodeURIComponent(tinymce.get("article-summary").getContent()),i=encodeURIComponent(tinymce.get("article-content").getContent()),r=document.getElementById("created").value,d=document.getElementById("page-type").value,c="",o="",m="",g="";featuredImageContainer?(c=featuredImageElement.clientHeight,o=imagePositionInput.value,m=(100*(o/c)).toFixed(2),g="true"===imagePositionInput.dataset.edited?m:imagePositionInput.value,e="update-article&lang="+siteLang+"&page-id="+a+"&article-title="+l+"&article-label="+pageLabel.value+"&article-slug="+n+"&translated-slug="+translatedSlug.value+"&article-summary="+s+"&article-content="+i+"&featured-image="+featuredImageInput.value+"&featured-image-id="+featuredImageId.value+"&image-position="+g+"&created="+r+"&page-type="+d+"&published="+published.value+"&display-in-menu="+displayInMenu.value):e="update-article&lang="+siteLang+"&page-id="+a+"&article-title="+l+"&article-label="+pageLabel.value+"&article-slug="+n+"&translated-slug="+translatedSlug.value+"&article-summary="+s+"&article-content="+i+"&created="+r+"&page-type="+d+"&published="+published.value+"&display-in-menu="+displayInMenu.value,dbQuery(e,"/jp-includes/update/update-article.php","application/x-www-form-urlencoded",messageSuccess,saved_str).then(function(){articleSlug.classList.contains("edited")&&(window.location.href=hostName+"/"+n)})},!1);var publishSwitch=document.getElementById("publish"),publishLabel=publishSwitch.parentElement.parentElement.getElementsByTagName("label")[0],publishSpan=publishSwitch.parentElement.parentElement.getElementsByTagName("span")[0];publishSwitch.addEventListener("change",function(){saveArticleDetails.style.opacity="1",saveArticleDetails.style.visibility="visible",publishSwitch.checked?(published.value="1",publishLabel.innerText=public_str,publishSpan.innerText=unpublish_str+":"):(published.value="0",publishLabel.innerText=draft_str,publishSpan.innerText=publish_str+":")},!1);var displayInMenuSwitch=document.getElementById("display-in-menu-switch"),displayInMenuSpan=displayInMenuSwitch.parentElement.parentElement.getElementsByTagName("span")[0];displayInMenuSwitch.addEventListener("change",function(){saveArticleDetails.style.opacity="1",saveArticleDetails.style.visibility="visible",displayInMenuSwitch.checked?(displayInMenu.value="checked",displayInMenuSpan.innerText=hideFromMenu_str+":"):(displayInMenu.value="",displayInMenuSpan.innerText=displayInMenu_str+":")},!1);var saveArticleDetails=document.getElementById("save-article-details");saveArticleDetails.addEventListener("click",function(t){t.preventDefault(),document.querySelector(".jp-save-changes").click()},!1),pageLabel.addEventListener("input",function(){saveArticleDetails.style.opacity="1",saveArticleDetails.style.visibility="visible"},!1),changeFunction(imgSaveBtn,"click",openDragUI,insertImage,_body,"tinymce-image-module")}var updateScrollMenu=document.getElementById("update-scrollmenu");updateScrollMenu&&updateScrollMenu.addEventListener("submit",function(t){t.preventDefault();var e=encodeURIComponent(tinymce.get("scroll-menu-text").getContent()),a="update-scrollmenu&lang="+siteLang+"&scroll-menu-text="+e;dbQuery(a,"/jp-includes/update/update-scroll-menu.php","application/x-www-form-urlencoded",messageSuccess,saved_str)},!1);var footerBgOptions,footerOptions=document.getElementById("edit-footer"),footerClassInput=document.getElementById("footer-class"),editFooter=document.getElementById("edit-footer");if(footerOptions&&(footerBgOptions=footerOptions.querySelector(".edit-background-options"),footerOptions.addEventListener("click",function(){secOpts(footerOptions)},!1)),editFooter){var footerThemeBackground=document.getElementById("footer-theme-background"),footerSecondaryBackground=document.getElementById("footer-secondary-background"),footerWhiteBackground=document.getElementById("footer-white-background"),footerBlackBackground=document.getElementById("footer-black-background"),footerImageBackground=document.getElementById("footer-image-background"),footerTranSwitch=document.getElementById("footer-translucence-switch");document.getElementById("edit-background-footer").addEventListener("click",function(){toggleBgMenu(footerBgOptions)},!1),footerThemeBackground.addEventListener("change",function(){toggleBg(footerClassInput,footerThemeBackground,footerSecondaryBackground,footerWhiteBackground,footerBlackBackground,footerImageBackground,footerOptions)},!1),footerSecondaryBackground.addEventListener("change",function(){toggleBg(footerClassInput,footerSecondaryBackground,footerThemeBackground,footerWhiteBackground,footerBlackBackground,footerImageBackground,footerOptions)},!1),footerWhiteBackground.addEventListener("change",function(){toggleBg(footerClassInput,footerWhiteBackground,footerThemeBackground,footerSecondaryBackground,footerBlackBackground,footerImageBackground,footerOptions)},!1),footerBlackBackground.addEventListener("change",function(){toggleBg(footerClassInput,footerBlackBackground,footerThemeBackground,footerSecondaryBackground,footerWhiteBackground,footerImageBackground,footerOptions)},!1),footerTranSwitch.addEventListener("change",function(){this.checked?(classInput.value+=" translucent",classInput.parentElement.classList.add("translucent")):(footerClassInput.value=footerClassInput.value.replace(" translucent",""),footerClassInput.parentElement.classList.remove("translucent"))},!1),footerImageBackground.parentElement.querySelector("label").addEventListener("click",function(){footerImageBackground.checked=!0,toggleBg(footerClassInput,footerImageBackground,footerThemeBackground,footerSecondaryBackground,footerWhiteBackground,footerBlackBackground,footerOptions),footerClassInput.value=footerImageBackground.value,imgSaveBtn.dataset.target=footerOptions.parentElement.classList[0],_body.classList.add("parallax-background-select")},!1),(isHome()||isArticle()||isSettings())&&(footerOptions.querySelector(".radio-list").getElementsByTagName("li")[0].querySelector("label").innerText=ntc.name(themeColor),footerOptions.querySelector(".radio-list").getElementsByTagName("li")[1].querySelector("label").innerText=ntc.name(secondaryColor),footerOptions.querySelector(".radio-list").getElementsByTagName("li")[2].querySelector("label").innerText=ntc.name(whiteColor))}var updateFooter=document.getElementById("update-footer");updateFooter&&updateFooter.addEventListener("submit",function(t){t.preventDefault();var e=encodeURIComponent(tinymce.get("footer-1").getContent()),a=encodeURIComponent(tinymce.get("footer-2").getContent()),l=encodeURIComponent(tinymce.get("footer-3").getContent()),n=document.getElementById("footer-class").value,s=document.getElementById("footer-background-image-id").value,i=document.getElementById("footer-background-image").value,r="update-footer&lang="+siteLang+"&column-one="+e+"&column-two="+a+"&column-three="+l+"&footer-class="+n+"&footer-background-image-id="+s+"&footer-background-image="+i;dbQuery(r,"/jp-includes/update/update-footer.php","application/x-www-form-urlencoded",messageSuccess,saved_str)},!1);var wayptGroupAltLang,wayptOrder,wayptLabel,wayptDesc,wayptLng,wayptLat,wayptImg,wayptId,gmf=document.getElementById("googlemaps-form"),gmfAltLang=document.getElementById("googlemaps-form-alt-lang"),gmfAddWaypt=document.getElementById("googlemaps-add-waypoint"),gmfAddWayptAltLang=document.getElementById("googlemaps-add-waypoint-alt-lang"),gfmWrapper=document.getElementById("gfm-main-wrapper"),gfmAltWrapper=document.getElementById("gfm-alt-wrapper"),chooseLanguage=document.getElementById("choose-language"),langSwitch=document.getElementById("language-switch");function thumbify(e){return e=e.replace("/uploads/","/uploads/thumbnails/"),e=e.replace(".jpg","-thumbnail.jpg"),e}var wayptImgLinks=document.getElementsByClassName("choose-waypoint-image");if(0<wayptImgLinks.length&&Array.prototype.slice.call(wayptImgLinks).forEach(function(e){var t=e.parentElement.querySelector("input");e.addEventListener("click",function(){imgSaveBtn.onclick=function(){e.querySelector("img").src=t.value=thumbify(selectedMedia.querySelector("img").src),document.getElementById("update-googlemaps").classList.add("show"),gmfAddWaypt.classList.add("hide"),gmfAltLang&&(document.getElementById("update-googlemaps-alt-lang").classList.add("show"),gmfAddWayptAltLang.classList.add("hide"))}},!1)}),gmf){_body.style.minHeight=gfmWrapper.offsetHeight+gfmWrapper.offsetTop+101+"px";var wayptGroup=gmf.querySelectorAll(".waypoint-group");gmf.querySelectorAll("input, textarea").forEach(function(e){e.addEventListener("input",function(){document.getElementById("update-googlemaps").classList.add("show"),gmfAddWaypt.classList.add("hide"),gmfAltLang&&(chooseLanguage.getElementsByTagName("p")[0].style.visibility="visible",chooseLanguage.getElementsByTagName("p")[0].style.opacity="1")},!1)}),gmfAltLang&&(wayptGroupAltLang=gmfAltLang.querySelectorAll(".waypoint-group"),gmfAltLang.querySelectorAll("input, textarea").forEach(function(e){e.addEventListener("input",function(){document.getElementById("update-googlemaps-alt-lang").classList.add("show"),gmfAddWayptAltLang.classList.add("hide"),chooseLanguage.getElementsByTagName("p")[0].style.visibility="visible",chooseLanguage.getElementsByTagName("p")[0].style.opacity="1"},!1)})),gmf.addEventListener("submit",function(t){t.preventDefault();var e,a=[[]];wayptGroup.forEach(function(t){wayptOrder=t.querySelector(".waypoint-order").value,wayptLabel=t.querySelector(".waypoint-label").value,wayptDesc=t.querySelector(".waypoint-description").value,wayptLng=t.querySelector(".waypoint-longitude").value,wayptLat=t.querySelector(".waypoint-latitude").value,wayptImg=t.querySelector(".waypoint-image").value,wayptId=t.querySelector(".waypoint-id").value,e="label="+wayptLabel+"&description="+wayptDesc+"&latitude="+wayptLat+"&longitude="+wayptLng+"&image="+wayptImg+"&order="+wayptOrder+"&id="+wayptId,a.push(queryStringToJSON(e))}),a.shift(),dbQuery(encodeURIComponent(JSON.stringify(a)),"/plugins/googlemaps/inc/update-googlemaps.php","application/json",messageSuccess,saved_str)},!1),gmfAltLang&&gmfAltLang.addEventListener("submit",function(t){t.preventDefault();var e,a=[[]];wayptGroupAltLang.forEach(function(t){wayptOrder=t.querySelector(".waypoint-order").value,wayptLabel=t.querySelector(".waypoint-label").value,wayptDesc=t.querySelector(".waypoint-description").value,wayptLng=t.querySelector(".waypoint-longitude").value,wayptLat=t.querySelector(".waypoint-latitude").value,wayptImg=t.querySelector(".waypoint-image").value,wayptId=t.querySelector(".waypoint-id").value,e="label="+wayptLabel+"&description="+wayptDesc+"&latitude="+wayptLat+"&longitude="+wayptLng+"&image="+wayptImg+"&order="+wayptOrder+"&id="+wayptId,a.push(queryStringToJSON(e))}),a.shift(),dbQuery(encodeURIComponent(JSON.stringify(a)),"/plugins/googlemaps/inc/update-googlemaps.php","application/json",messageSuccess,saved_str)},!1)}if(langSwitch){var labelEn=chooseLanguage.querySelector("label"),labelNo=chooseLanguage.getElementsByTagName("label")[2];langSwitch.addEventListener("change",function(){labelEn.classList.toggle("current"),labelNo.classList.toggle("current"),gfmWrapper.classList.toggle("hide"),gfmAltWrapper.classList.toggle("hide")},!1)}var phpinfoLink=document.getElementById("phpinfo");phpinfoLink&&phpinfoLink.addEventListener("click",function(t){t.preventDefault(),popUpWindow(phpinfoLink,phpinfoLink.href)},!1);function tinyCloseModule(){!1===_module.querySelector(".module-inner").contains(event.target)&&(closeModule(),window.removeEventListener("click",tinyCloseModule,!0))}function hasError(e){e.classList.add("has-error"),setTimeout(function(){e.classList.remove("has-error")},1500)}var newUserForm=document.getElementById("add-user-form");if(newUserForm){var nUsername=document.getElementById("username"),nEmail=document.getElementById("email"),nPassword=document.getElementById("password"),nConfirmPassword=document.getElementById("confirm_password"),nRole=document.getElementById("user-role"),_input=Array.prototype.slice.call(document.getElementsByTagName("input"));newUserForm.addEventListener("submit",function(t){t.preventDefault();for(var a=0;a<_input.length;a++)if(!_input[a].value)return void hasError(_input[a].parentElement);if(nPassword.value!==nConfirmPassword.value)return nConfirmPassword.parentElement.classList.add("has-error"),nConfirmPassword.parentElement.querySelector(".help-block").innerText=pwdNoMatch_str,void setTimeout(function(){nConfirmPassword.parentElement.classList.remove("has-error")},1500);var e="add-user&username="+nUsername.value+"&email="+nEmail.value+"&password="+nPassword.value+"&confirm_password="+nConfirmPassword.value+"&user_role="+nRole.value;dbQuery(e,"/jp-includes/insert/add-user.php","application/x-www-form-urlencoded",messageSuccess,newUser_str,!1,"/jp-admin/users.php?newuser=success")})}function download_csv(e,t){var a,l;a=new Blob([e],{type:"text/csv"}),l=document.createElement("a"),l.download=t,l.href=window.URL.createObjectURL(a),l.style.display="none",document.body.appendChild(l),l.click()}function export_table_to_csv(e,t){for(var a=[],l=document.querySelectorAll("table tr"),n=0;n<l.length;n++){for(var s=[],r=l[n].querySelectorAll("td, th"),d=0;d<r.length;d++)s.push(r[d].innerText);a.push(s.join(","))}download_csv(a.join("\n"),t)}0<document.getElementsByClassName("results-page").length&&document.getElementById("btnExport").addEventListener("click",function(){var e=document.querySelector("table").outerHTML;export_table_to_csv(e,"resultater.csv")}),document.getElementById("embed-youtube")&&document.getElementById("embed-youtube").querySelector("form").addEventListener("submit",function(t){t.preventDefault();var e;Array.prototype.slice.call(document.getElementsByName("yt-size")).forEach(function(t){t.checked&&(e=t.value)}),insertVideo(document.getElementById("youtube-url").value,document.getElementById("youtube-title").value,e)},!1);function insertVideo(e,t,a){var l=getLastItem(e),n="<p><span class=\"video-iframe "+a+"-video\"><iframe title=\""+t+"\" src=\"https://www.youtube.com/embed/"+l.replace("watch?v=","")+"?html5=1\" width=\"510\" height=\"608\" frameborder=\"0\" sandbox=\"allow-scripts allow-same-origin\" allowfullscreen=\"\"></iframe></span></p>";tinymce.activeEditor.insertContent(n),closeYTE()}Array.prototype.slice.call(document.getElementsByClassName("video-iframe")).forEach(function(e){e.contentEditable=!1,e.style.backgroundImage="url('https://i.ytimg.com/vi/"+e.querySelector("iframe").src.replace("?html5=1","").replace("https://www.youtube.com/embed/","")+"/sddefault.jpg')"});var getLastItem=function(e){return e.substring(e.lastIndexOf("/")+1)};function getAverageRGB(e){var t,a,l,n,s={r:127,g:127,b:127},r=document.createElement("canvas"),d=r.getContext&&r.getContext("2d"),c=-4,o={r:0,g:0,b:0},m=0;if(!d)return s;l=r.height=e.naturalHeight||e.offsetHeight||e.height,a=r.width=e.naturalWidth||e.offsetWidth||e.width,d.drawImage(e,0,0);try{t=d.getImageData(0,0,a,l)}catch(t){return s}for(n=t.data.length;(c+=20)<n;)++m,o.r+=t.data[c],o.g+=t.data[c+1],o.b+=t.data[c+2];return o.r=~~(o.r/m),o.g=~~(o.g/m),o.b=~~(o.b/m),o}function closeAllSelect(e){var t,a,l,n=[];for(t=document.getElementsByClassName("select-items"),a=document.getElementsByClassName("select-selected"),l=0;l<a.length;l++)e==a[l]?n.push(l):a[l].classList.remove("select-arrow-active");for(l=0;l<t.length;l++)n.indexOf(l)&&t[l].classList.add("select-hide")}0<document.getElementsByClassName("custom-select").length&&(Array.prototype.slice.call(document.getElementsByClassName("custom-select")).forEach(function(e){var t=e.getElementsByTagName("select")[0],a=document.createElement("DIV");a.classList.add("select-selected"),a.classList.add("noselect"),a.innerHTML=t.options[t.selectedIndex].innerHTML,e.appendChild(a);var l=document.createElement("DIV");l.classList.add("select-items"),l.classList.add("select-hide"),l.classList.add("secondary-background");for(var n,s=0;s<t.length;s++)n=document.createElement("DIV"),n.innerHTML=t.options[s].innerHTML,n.addEventListener("click",function(){var e,t,a;e=this.parentElement.parentElement.getElementsByTagName("select")[0],t=this.parentElement.previousSibling;for(var l=0;l<e.length;l++)if(e.options[l].innerHTML===this.innerHTML){e.selectedIndex=l,t.innerHTML=this.innerHTML,a=this.parentNode.getElementsByClassName("same-as-selected"),Array.prototype.slice.call(a).forEach(function(e){e.classList.remove("same-as-selected")}),this.classList.add("same-as-selected");break}t.click()},!1),l.appendChild(n);e.appendChild(l),a.addEventListener("click",function(t){t.stopPropagation()?t.stopPropagation():t.cancelBubble=!0,closeAllSelect(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-open")},!1)}),document.addEventListener("click",function(t){"select"!==t.target.nodeName.toLowerCase()&&(Array.prototype.slice.call(document.getElementsByClassName("select-open")).forEach(function(e){e.classList.remove("select-open")}),closeAllSelect())},!1));
